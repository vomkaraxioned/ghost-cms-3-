{"version":3,"file":"kg-default-nodes.js","sources":["../lib/KoenigDecoratorNode.js","../lib/utils/read-text-content.js","../lib/generate-decorator-node.js","../lib/utils/build-clean-basic-html-for-element.js","../lib/utils/read-caption-from-element.js","../lib/utils/read-image-attributes-from-element.js","../lib/nodes/image/image-parser.js","../lib/utils/get-available-image-widths.js","../lib/utils/is-local-content-image.js","../lib/utils/is-unsplash-image.js","../lib/utils/srcset-attribute.js","../lib/utils/resize-image.js","../lib/utils/add-create-document-option.js","../lib/utils/render-empty-container.js","../lib/nodes/image/image-renderer.js","../lib/nodes/image/ImageNode.js","../lib/nodes/codeblock/codeblock-parser.js","../lib/nodes/codeblock/codeblock-renderer.js","../lib/nodes/codeblock/CodeBlockNode.js","../lib/nodes/markdown/markdown-renderer.js","../lib/nodes/markdown/MarkdownNode.js","../lib/nodes/video/video-parser.js","../lib/nodes/video/video-renderer.js","../lib/nodes/video/VideoNode.js","../lib/nodes/audio/audio-parser.js","../lib/nodes/audio/audio-renderer.js","../lib/nodes/audio/AudioNode.js","../lib/utils/clean-dom.js","../lib/nodes/callout/callout-renderer.js","../lib/nodes/callout/callout-parser.js","../lib/nodes/callout/CalloutNode.js","../lib/nodes/aside/AsideParser.js","../lib/nodes/aside/AsideNode.js","../lib/nodes/horizontalrule/horizontalrule-renderer.js","../lib/nodes/horizontalrule/horizontalrule-parser.js","../lib/nodes/horizontalrule/HorizontalRuleNode.js","../lib/nodes/html/html-renderer.js","../lib/nodes/html/html-parser.js","../lib/nodes/html/HtmlNode.js","../lib/nodes/toggle/toggle-parser.js","../lib/nodes/toggle/toggle-renderer.js","../lib/nodes/toggle/ToggleNode.js","../lib/nodes/button/button-parser.js","../lib/nodes/button/button-renderer.js","../lib/nodes/button/ButtonNode.js","../lib/nodes/bookmark/bookmark-parser.js","../lib/nodes/bookmark/bookmark-renderer.js","../lib/nodes/bookmark/BookmarkNode.js","../lib/utils/escape-html.js","../lib/utils/size-byte-converter.js","../lib/nodes/file/file-renderer.js","../lib/nodes/file/file-parser.js","../lib/nodes/file/FileNode.js","../lib/utils/slugify.js","../lib/nodes/header/renderers/v1/header-renderer.js","../lib/nodes/header/parsers/header-parser.js","../lib/nodes/header/renderers/v2/header-renderer.js","../lib/nodes/header/HeaderNode.js","../lib/nodes/paywall/paywall-parser.js","../lib/nodes/paywall/paywall-renderer.js","../lib/nodes/paywall/PaywallNode.js","../lib/nodes/product/product-parser.js","../lib/nodes/product/product-renderer.js","../lib/nodes/product/ProductNode.js","../lib/nodes/embed/embed-parser.js","../lib/nodes/embed/types/twitter.js","../lib/nodes/embed/embed-renderer.js","../lib/nodes/embed/EmbedNode.js","../lib/utils/replacement-strings.js","../lib/nodes/email/email-renderer.js","../lib/nodes/email/EmailNode.js","../lib/nodes/gallery/gallery-parser.js","../lib/nodes/gallery/gallery-renderer.js","../lib/nodes/gallery/GalleryNode.js","../lib/nodes/email-cta/email-cta-renderer.js","../lib/nodes/email-cta/EmailCtaNode.js","../lib/nodes/signup/signup-parser.js","../lib/nodes/signup/signup-renderer.js","../lib/nodes/signup/SignupNode.js","../lib/nodes/collection/collection-renderer.js","../lib/nodes/collection/collection-parser.js","../lib/nodes/collection/CollectionNode.js","../lib/nodes/ExtendedTextNode.js","../lib/nodes/ExtendedHeadingNode.js","../lib/kg-default-nodes.js"],"sourcesContent":["/* eslint-disable ghost/filenames/match-exported-class */\n/* c8 ignore start */\nimport {DecoratorNode} from 'lexical';\n\nexport class KoenigDecoratorNode extends DecoratorNode {\n}\n\nexport function $isKoenigCard(node) {\n    return node instanceof KoenigDecoratorNode;\n}\n/* c8 ignore end */\n","import {$getRoot} from 'lexical';\n\n// when used nodes are used client-side their data attributes may be an editor\n// instance rather than a string in the case of nested editors\nexport default function readTextContent(node, property) {\n    const propertyName = `__${property}`;\n    const propertyEditorName = `${propertyName}Editor`;\n\n    // prefer the editor if it exists as the underlying value isn't written until export\n    const value = node[propertyEditorName] || node[propertyName];\n\n    if (!value) {\n        return '';\n    }\n\n    if (typeof value === 'string') {\n        return value;\n    }\n\n    if (typeof value === 'number') {\n        return value.toString();\n    }\n\n    if (typeof value.getEditorState === 'function') {\n        let text = '';\n\n        value.getEditorState().read(() => {\n            text = $getRoot().getTextContent();\n        });\n\n        return text;\n    }\n\n    return '';\n}\n","import {KoenigDecoratorNode} from './KoenigDecoratorNode';\nimport readTextContent from './utils/read-text-content';\n/**\n * Validates the required arguments passed to `generateDecoratorNode`\n*/\nfunction validateArguments(nodeType, properties) {\n    /* eslint-disable ghost/ghost-custom/no-native-error */\n    /* c8 ignore start */\n    if (!nodeType) {\n        throw new Error({message: '[generateDecoratorNode] A unique \"nodeType\" should be provided'});\n    }\n\n    properties.forEach((prop) => {\n        if (!('name' in prop) || !('default' in prop)){\n            throw new Error({message: '[generateDecoratorNode] Properties should have both \"name\" and \"default\" attributes.'});\n        }\n\n        if (prop.urlType && !['url', 'html', 'markdown'].includes(prop.urlType)) {\n            throw new Error({message: '[generateDecoratorNode] \"urlType\" should be either \"url\", \"html\" or \"markdown\"'});\n        }\n\n        if ('wordCount' in prop && typeof prop.wordCount !== 'boolean') {\n            throw new Error({message: '[generateDecoratorNode] \"wordCount\" should be of boolean type.'});\n        }\n    });\n    /* c8 ignore stop */\n}\n\n/**\n * @typedef {Object} DecoratorNodeProperty\n * @property {string} name - The property's name.\n * @property {*} default - The property's default value\n * @property {('url'|'html'|'markdown'|null)} urlType - If the property contains a URL, the URL's type: 'url', 'html' or 'markdown'. Use 'url' is the property contains only a URL, 'html' or 'markdown' if the property contains HTML or markdown code, that may contain URLs.\n * @property {boolean} wordCount - Whether the property should be counted in the word count\n *\n * @param {string} nodeType â€“ The node's type (must be unique)\n * @param {DecoratorNodeProperty[]} properties - An array of properties for the generated class\n * @returns {Object} - The generated class.\n */\nexport function generateDecoratorNode({nodeType, properties = [], version = 1}) {\n    validateArguments(nodeType, properties);\n\n    // Adds a `privateName` field to the properties for convenience (e.g. `__name`):\n    // properties: [{name: 'name', privateName: '__name', type: 'string', default: 'hello'}, {...}]\n    properties = properties.map((prop) => {\n        return {...prop, privateName: `__${prop.name}`};\n    });\n\n    class GeneratedDecoratorNode extends KoenigDecoratorNode {\n        constructor(data = {}, key) {\n            super(key);\n            properties.forEach((prop) => {\n                if (typeof prop.default === 'boolean') {\n                    this[prop.privateName] = data[prop.name] ?? prop.default;\n                } else {\n                    this[prop.privateName] = data[prop.name] || prop.default;\n                }\n            });\n        }\n\n        /**\n         * Returns the node's unique type\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/nodes#extending-decoratornode\n         * @returns {string}\n         */\n        static getType() {\n            return nodeType;\n        }\n\n        /**\n         * Creates a copy of an existing node with all its properties\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/nodes#extending-decoratornode\n         */\n        static clone(node) {\n            return new this(node.getDataset(), node.__key);\n        }\n\n        /**\n         * Transforms URLs contained in the payload to relative paths (`__GHOST_URL__/relative/path/`),\n         * so that URLs to be changed without having to update the database\n         * @see https://github.com/TryGhost/SDK/tree/main/packages/url-utils\n         */\n        static get urlTransformMap() {\n            let map = {};\n\n            properties.forEach((prop) => {\n                if (prop.urlType) {\n                    map[prop.name] = prop.urlType;\n                }\n            });\n\n            return map;\n        }\n\n        /**\n         * Convenience method to get all properties of the node\n         * @returns {Object} - The node's properties\n         */\n        getDataset() {\n            const self = this.getLatest();\n\n            let dataset = {};\n            properties.forEach((prop) => {\n                dataset[prop.name] = self[prop.privateName];\n            });\n\n            return dataset;\n        }\n\n        /**\n         * Converts JSON to a Lexical node\n         * @see https://lexical.dev/docs/concepts/serialization#lexicalnodeimportjson\n         * @extends DecoratorNode\n         * @param {Object} serializedNode - Lexical's representation of the node, in JSON format\n         */\n        static importJSON(serializedNode) {\n            const data = {};\n\n            properties.forEach((prop) => {\n                data[prop.name] = serializedNode[prop.name];\n            });\n\n            return new this(data);\n        }\n\n        /**\n         * Serializes a Lexical node to JSON. The JSON content is then saved to the database.\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/serialization#lexicalnodeexportjson\n         */\n        exportJSON() {\n            const dataset = {\n                type: nodeType,\n                version: version,\n                ...properties.reduce((obj, prop) => {\n                    obj[prop.name] = this[prop.name];\n                    return obj;\n                }, {})\n            };\n            return dataset;\n        }\n\n        /* c8 ignore start */\n        /**\n         * Inserts node in the DOM. Required when extending the DecoratorNode.\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/nodes#extending-decoratornode\n         */\n        createDOM() {\n            return document.createElement('div');\n        }\n\n        /**\n         * Required when extending the DecoratorNode\n         * @extends DecoratorNode\n         * @see https://lexical.dev/docs/concepts/nodes#extending-decoratornode\n         */\n        updateDOM() {\n            return false;\n        }\n\n        /**\n         * Defines whether a node is a top-level block.\n         * @see https://lexical.dev/docs/api/classes/lexical.DecoratorNode#isinline\n         */\n        isInline() {\n            // All our cards are top-level blocks. Override if needed.\n            return false;\n        }\n        /* c8 ignore stop */\n\n        /**\n         * Defines whether a node has dynamic data that needs to be fetched from the server when rendering\n         */\n        hasDynamicData() {\n            return false;\n        }\n\n        /**\n         * Defines whether a node has an edit mode in the editor UI\n         */\n        hasEditMode() {\n            // Most of our cards have an edit mode. Override if needed.\n            return true;\n        }\n\n        /*\n        * Returns the text content of the node, used by the editor to calculate the word count\n        * This method filters out properties without `wordCount: true`\n        */\n        getTextContent() {\n            const self = this.getLatest();\n            const propertiesWithText = properties.filter(prop => !!prop.wordCount);\n\n            const text = propertiesWithText.map(\n                prop => readTextContent(self, prop.name)\n            ).filter(Boolean).join('\\n');\n\n            return text ? `${text}\\n\\n` : '';\n        }\n    }\n\n    /**\n     * Generates getters and setters for each property, following ES6 syntax\n     * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get\n     * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set\n     *\n     * Example: for a given property 'content', the generated getter and setter will be:\n     * get content() {\n     *    const self = this.getLatest();\n     *    return self.__content;\n     * }\n     *\n     * set content(newVal) {\n     *   const writable = this.getWritable();\n     *   writable.__content = newVal;\n     * }\n     *\n     * They can be used as `node.content` (getter) and `node.content = 'new value'` (setter)\n     */\n    properties.forEach((prop) => {\n        Object.defineProperty(GeneratedDecoratorNode.prototype, prop.name, {\n            get: function () {\n                const self = this.getLatest();\n                return self[prop.privateName];\n            },\n            set: function (newVal) {\n                const writable = this.getWritable();\n                writable[prop.privateName] = newVal;\n            }\n        });\n    });\n\n    return GeneratedDecoratorNode;\n}","import cleanBasicHtml from '@tryghost/kg-clean-basic-html';\n\nexport function buildCleanBasicHtmlForElement(domNode) {\n    return function _cleanBasicHtml(html) {\n        const cleanedHtml = cleanBasicHtml(html, {\n            createDocument: (_html) => {\n                const newDoc = domNode.ownerDocument.implementation.createHTMLDocument();\n                newDoc.body.innerHTML = _html;\n                return newDoc;\n            }\n        });\n        return cleanedHtml;\n    };\n}\n","import {buildCleanBasicHtmlForElement} from './build-clean-basic-html-for-element';\n\nexport function readCaptionFromElement(element, {selector = 'figcaption'} = {}) {\n    const cleanBasicHtml = buildCleanBasicHtmlForElement(element);\n\n    let caption;\n\n    const figcaptions = Array.from(element.querySelectorAll(selector));\n    if (figcaptions.length) {\n        figcaptions.forEach((figcaption) => {\n            const cleanHtml = cleanBasicHtml(figcaption.innerHTML);\n            caption = caption ? `${caption} / ${cleanHtml}` : cleanHtml;\n        });\n    }\n\n    return caption;\n}\n","export function readImageAttributesFromElement(element) {\n    const attrs = {};\n\n    if (element.src) {\n        attrs.src = element.src;\n    }\n\n    if (element.width) {\n        attrs.width = element.width;\n    } else if (element.dataset && element.dataset.width) {\n        attrs.width = parseInt(element.dataset.width, 10);\n    }\n\n    if (element.height) {\n        attrs.height = element.height;\n    } else if (element.dataset && element.dataset.height) {\n        attrs.height = parseInt(element.dataset.height, 10);\n    }\n\n    if ((!element.width && !element.height) && element.getAttribute('data-image-dimensions')) {\n        const [, width, height] = (/^(\\d*)x(\\d*)$/gi).exec(element.getAttribute('data-image-dimensions'));\n        attrs.width = parseInt(width, 10);\n        attrs.height = parseInt(height, 10);\n    }\n\n    if (element.alt) {\n        attrs.alt = element.alt;\n    }\n\n    if (element.title) {\n        attrs.title = element.title;\n    }\n\n    if (element.parentNode.tagName === 'A') {\n        const href = element.parentNode.href;\n\n        if (href !== attrs.src) {\n            attrs.href = href;\n        }\n    }\n\n    return attrs;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element.js';\nimport {readImageAttributesFromElement} from '../../utils/read-image-attributes-from-element.js';\n\nexport function parseImageNode(ImageNode) {\n    return {\n        img: () => ({\n            conversion(domNode) {\n                if (domNode.tagName === 'IMG') {\n                    const {src, width, height, alt, title} = readImageAttributesFromElement(domNode);\n\n                    const node = new ImageNode({alt, src, title, width, height});\n                    return {node};\n                }\n\n                return null;\n            },\n            priority: 1\n        }),\n        figure: (nodeElem) => {\n            const img = nodeElem.querySelector('img');\n            if (img) {\n                return {\n                    conversion(domNode) {\n                        const kgClass = domNode.className.match(/kg-width-(wide|full)/);\n                        const grafClass = domNode.className.match(/graf--layout(FillWidth|OutsetCenter)/);\n\n                        if (!img) {\n                            return null;\n                        }\n\n                        const payload = readImageAttributesFromElement(img);\n\n                        if (kgClass) {\n                            payload.cardWidth = kgClass[1];\n                        } else if (grafClass) {\n                            payload.cardWidth = grafClass[1] === 'FillWidth' ? 'full' : 'wide';\n                        }\n\n                        payload.caption = readCaptionFromElement(domNode);\n\n                        const {src, width, height, alt, title, caption, cardWidth, href} = payload;\n                        const node = new ImageNode({alt, src, title, width, height, caption, cardWidth, href});\n                        return {node};\n                    },\n                    priority: 0 // since we are generically parsing figure elements, we want this to run after others (like the gallery)\n                };\n            }\n            return null;\n        }\n    };\n}\n","export const getAvailableImageWidths = function (image, imageSizes) {\n    // get a sorted list of the available responsive widths\n    const imageWidths = Object.values(imageSizes)\n        .map(({width}) => width)\n        .sort((a, b) => a - b);\n\n    // select responsive widths that are usable based on the image width\n    const availableImageWidths = imageWidths\n        .filter(width => width <= image.width);\n\n    // add the original image size to the responsive list if it's not captured by largest responsive size\n    // - we can't know the width/height of the original `src` image because we don't know if it was resized\n    //   or not. Adding the original image to the responsive list ensures we're not showing smaller sized\n    //   images than we need to be\n    if (image.width > availableImageWidths[availableImageWidths.length - 1] && image.width < imageWidths[imageWidths.length - 1]) {\n        availableImageWidths.push(image.width);\n    }\n\n    return availableImageWidths;\n};\n","export const isLocalContentImage = function (url, siteUrl = '') {\n    const normalizedSiteUrl = siteUrl.replace(/\\/$/, '');\n    const imagePath = url.replace(normalizedSiteUrl, '');\n    return /^(\\/.*|__GHOST_URL__)\\/?content\\/images\\//.test(imagePath);\n};\n","export const isUnsplashImage = function (url) {\n    return /images\\.unsplash\\.com/.test(url);\n};\n","import {isLocalContentImage} from './is-local-content-image';\nimport {getAvailableImageWidths} from './get-available-image-widths';\nimport {isUnsplashImage} from './is-unsplash-image';\n\n// default content sizes: [600, 1000, 1600, 2400]\n\nexport const getSrcsetAttribute = function ({src, width, options}) {\n    if (!options.imageOptimization || options.imageOptimization.srcsets === false || !width || !options.imageOptimization.contentImageSizes) {\n        return;\n    }\n\n    if (isLocalContentImage(src, options.siteUrl) && options.canTransformImage && !options.canTransformImage(src)) {\n        return;\n    }\n\n    const srcsetWidths = getAvailableImageWidths({width}, options.imageOptimization.contentImageSizes);\n\n    // apply srcset if this is a relative image that matches Ghost's image url structure\n    if (isLocalContentImage(src, options.siteUrl)) {\n        const [, imagesPath, filename] = src.match(/(.*\\/content\\/images)\\/(.*)/);\n        const srcs = [];\n\n        srcsetWidths.forEach((srcsetWidth) => {\n            if (srcsetWidth === width) {\n                // use original image path if width matches exactly (avoids 302s from size->original)\n                srcs.push(`${src} ${srcsetWidth}w`);\n            } else if (srcsetWidth <= width) {\n                // avoid creating srcset sizes larger than intrinsic image width\n                srcs.push(`${imagesPath}/size/w${srcsetWidth}/${filename} ${srcsetWidth}w`);\n            }\n        });\n\n        if (srcs.length) {\n            return srcs.join(', ');\n        }\n    }\n\n    // apply srcset if this is an Unsplash image\n    if (isUnsplashImage(src)) {\n        const unsplashUrl = new URL(src);\n        const srcs = [];\n\n        srcsetWidths.forEach((srcsetWidth) => {\n            unsplashUrl.searchParams.set('w', srcsetWidth);\n            srcs.push(`${unsplashUrl.href} ${srcsetWidth}w`);\n        });\n\n        return srcs.join(', ');\n    }\n};\n\nexport const setSrcsetAttribute = function (elem, image, options) {\n    if (!elem || !['IMG', 'SOURCE'].includes(elem.tagName) || !elem.getAttribute('src') || !image) {\n        return;\n    }\n\n    const {src, width} = image;\n    const srcset = getSrcsetAttribute({src, width, options});\n\n    if (srcset) {\n        elem.setAttribute('srcset', srcset);\n    }\n};\n","export const resizeImage = function (image, {width: desiredWidth, height: desiredHeight} = {}) {\n    const {width, height} = image;\n    const ratio = width / height;\n\n    if (desiredWidth) {\n        const resizedHeight = Math.round(desiredWidth / ratio);\n\n        return {\n            width: desiredWidth,\n            height: resizedHeight\n        };\n    }\n\n    if (desiredHeight) {\n        const resizedWidth = Math.round(desiredHeight * ratio);\n\n        return {\n            width: resizedWidth,\n            height: desiredHeight\n        };\n    }\n};\n","// If we're in a browser environment, we can use the global document object,\n// but if we're in a non-browser environment, we need to be passed a `createDocument` function\nexport function addCreateDocumentOption(options) {\n    if (!options.createDocument) {\n        /* c8 ignore start */\n        let document = typeof window !== 'undefined' && window.document;\n\n        if (!document) {\n            throw new Error('renderImageNodeToDOM() must be passed a `createDocument` function as an option when used in a non-browser environment'); // eslint-disable-line\n        }\n\n        options.createDocument = function () {\n            return document;\n        };\n        /* c8 ignore end */\n    }\n}\n","/*\n * Renders an empty container element\n * In the returned object, `type: 'inner'` is picked up by the `@tryghost/kg-lexical-html-renderer` package\n * to render the inner content of the container element (in this case, nothing)\n *\n * @see @tryghost/kg-lexical-html-renderer package\n * @see https://github.com/TryGhost/Koenig/blob/e14c008e176f7a1036fe3f3deb924ed69a69191f/packages/kg-lexical-html-renderer/lib/convert-to-html-string.js#L29\n */\nexport function renderEmptyContainer(document) {\n    const emptyContainer = document.createElement('span');\n    return {element: emptyContainer, type: 'inner'};\n}\n","import {getAvailableImageWidths} from '../../utils/get-available-image-widths';\nimport {isLocalContentImage} from '../../utils/is-local-content-image';\nimport {setSrcsetAttribute} from '../../utils/srcset-attribute';\nimport {resizeImage} from '../../utils/resize-image';\nimport {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderImageNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    if (!node.src || node.src.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    const figure = document.createElement('figure');\n\n    let figureClasses = 'kg-card kg-image-card';\n    if (node.cardWidth !== 'regular') {\n        figureClasses += ` kg-width-${node.cardWidth}`;\n    }\n    if (node.caption) {\n        figureClasses += ' kg-card-hascaption';\n    }\n\n    figure.setAttribute('class', figureClasses);\n\n    const img = document.createElement('img');\n    img.setAttribute('src', node.src);\n    img.setAttribute('class', 'kg-image');\n    img.setAttribute('alt', node.alt);\n    img.setAttribute('loading', 'lazy');\n\n    if (node.title) {\n        img.setAttribute('title', node.title);\n    }\n\n    if (node.width && node.height) {\n        img.setAttribute('width', node.width);\n        img.setAttribute('height', node.height);\n    }\n\n    // images can be resized to max width, if that's the case output\n    // the resized width/height attrs to ensure 3rd party gallery plugins\n    // aren't affected by differing sizes\n    const {canTransformImage} = options;\n    const {defaultMaxWidth} = options.imageOptimization || {};\n    if (\n        defaultMaxWidth &&\n            node.width > defaultMaxWidth &&\n            isLocalContentImage(node.src, options.siteUrl) &&\n            canTransformImage &&\n            canTransformImage(node.src)\n    ) {\n        const imageDimensions = {\n            width: node.width,\n            height: node.height\n        };\n        const {width, height} = resizeImage(imageDimensions, {width: defaultMaxWidth});\n        img.setAttribute('width', width);\n        img.setAttribute('height', height);\n    }\n\n    if (options.target !== 'email') {\n        const imgAttributes = {\n            src: node.src,\n            width: node.width,\n            height: node.height\n        };\n        setSrcsetAttribute(img, imgAttributes, options);\n\n        if (img.getAttribute('srcset') && node.width && node.width >= 720) {\n            // standard size\n            if (!node.cardWidth || node.cardWidth === 'regular') {\n                img.setAttribute('sizes', '(min-width: 720px) 720px');\n            }\n\n            if (node.cardWidth === 'wide' && node.width >= 1200) {\n                img.setAttribute('sizes', '(min-width: 1200px) 1200px');\n            }\n        }\n    }\n\n    // Outlook is unable to properly resize images without a width/height\n    // so we add that at the expected size in emails (600px) and use a higher\n    // resolution image to keep images looking good on retina screens\n    if (options.target === 'email' && node.width && node.height) {\n        let imageDimensions = {\n            width: node.width,\n            height: node.height\n        };\n        if (node.width >= 600) {\n            imageDimensions = resizeImage(imageDimensions, {width: 600});\n        }\n        img.setAttribute('width', imageDimensions.width);\n        img.setAttribute('height', imageDimensions.height);\n\n        if (isLocalContentImage(node.src, options.siteUrl) && options.canTransformImage?.(node.src)) {\n            // find available image size next up from 2x600 so we can use it for the \"retina\" src\n            const availableImageWidths = getAvailableImageWidths(node, options.imageOptimization.contentImageSizes);\n            const srcWidth = availableImageWidths.find(width => width >= 1200);\n\n            if (!srcWidth || srcWidth === node.width) {\n                // do nothing, width is smaller than retina or matches the original node src\n            } else {\n                const [, imagesPath, filename] = node.src.match(/(.*\\/content\\/images)\\/(.*)/);\n                img.setAttribute('src', `${imagesPath}/size/w${srcWidth}/${filename}`);\n            }\n        }\n    }\n\n    if (node.href) {\n        const a = document.createElement('a');\n        a.setAttribute('href', node.href);\n        a.appendChild(img);\n        figure.appendChild(a);\n    } else {\n        figure.appendChild(img);\n    }\n\n    if (node.caption) {\n        const caption = document.createElement('figcaption');\n        caption.innerHTML = node.caption;\n        figure.appendChild(caption);\n    }\n\n    return {element: figure};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseImageNode} from './image-parser';\nimport {renderImageNode} from './image-renderer';\nexport class ImageNode extends generateDecoratorNode({nodeType: 'image',\n    properties: [\n        {name: 'src', default: '', urlType: 'url'},\n        {name: 'caption', default: '', urlType: 'html', wordCount: true},\n        {name: 'title', default: ''},\n        {name: 'alt', default: ''},\n        {name: 'cardWidth', default: 'regular'},\n        {name: 'width', default: null},\n        {name: 'height', default: null},\n        {name: 'href', default: '', urlType: 'url'}\n    ]}\n) {\n    /* @override */\n    exportJSON() {\n        // checks if src is a data string\n        const {src, width, height, title, alt, caption, cardWidth, href} = this;\n        const isBlob = src.startsWith('data:');\n\n        const dataset = {\n            type: 'image',\n            version: 1,\n            src: isBlob ? '<base64String>' : src,\n            width,\n            height,\n            title,\n            alt,\n            caption,\n            cardWidth,\n            href\n        };\n        return dataset;\n    }\n\n    static importDOM() {\n        return parseImageNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderImageNode(this, options);\n    }\n\n    hasEditMode() {\n        return false;\n    }\n}\n\nexport const $createImageNode = (dataset) => {\n    return new ImageNode(dataset);\n};\n\nexport function $isImageNode(node) {\n    return node instanceof ImageNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element';\n\nexport function parseCodeBlockNode(CodeBlockNode) {\n    return {\n        figure: (nodeElem) => {\n            const pre = nodeElem.querySelector('pre');\n            if (nodeElem.tagName === 'FIGURE' && pre) {\n                return {\n                    conversion(domNode) {        \n                        let code = pre.querySelector('code');\n                        let figcaption = domNode.querySelector('figcaption');\n    \n                        // if there's no caption the pre key should pick it up\n                        if (!code || !figcaption) {\n                            return null;\n                        }\n    \n                        let payload = {\n                            code: code.textContent,\n                            caption: readCaptionFromElement(domNode)\n                        };\n    \n                        let preClass = pre.getAttribute('class') || '';\n                        let codeClass = code.getAttribute('class') || '';\n                        let langRegex = /lang(?:uage)?-(.*?)(?:\\s|$)/i;\n                        let languageMatches = preClass.match(langRegex) || codeClass.match(langRegex);\n                        if (languageMatches) {\n                            payload.language = languageMatches[1].toLowerCase();\n                        }\n    \n                        const node = new CodeBlockNode(payload);\n                        return {node};\n                    },\n                    priority: 2 // falls back to pre if no caption\n                };\n            }\n            return null;\n        },\n        pre: () => ({\n            conversion(domNode) {\n                if (domNode.tagName === 'PRE') {\n                    let [codeElement] = domNode.children;\n\n                    if (codeElement && codeElement.tagName === 'CODE') {\n                        let payload = {code: codeElement.textContent};\n                        let preClass = domNode.getAttribute('class') || '';\n                        let codeClass = codeElement.getAttribute('class') || '';\n                        let langRegex = /lang(?:uage)?-(.*?)(?:\\s|$)/i;\n                        let languageMatches = preClass.match(langRegex) || codeClass.match(langRegex);\n                        if (languageMatches) {\n                            payload.language = languageMatches[1].toLowerCase();\n                        }\n                        const node = new CodeBlockNode(payload);\n                        return {node};\n                    }\n                }\n\n                return null;\n            },\n            priority: 1\n        })\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderCodeBlockNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (!node.code || node.code.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    const pre = document.createElement('pre');\n    const code = document.createElement('code');\n\n    if (node.language) {\n        code.setAttribute('class', `language-${node.language}`);\n    }\n\n    code.appendChild(document.createTextNode(node.code));\n    pre.appendChild(code);\n\n    if (node.caption) {\n        let figure = document.createElement('figure');\n        figure.setAttribute('class', 'kg-card kg-code-card');\n        figure.appendChild(pre);\n\n        let figcaption = document.createElement('figcaption');\n        figcaption.innerHTML = node.caption;\n        figure.appendChild(figcaption);\n\n        return {element: figure};\n    } else {\n        return {element: pre};\n    }\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseCodeBlockNode} from './codeblock-parser';\nimport {renderCodeBlockNode} from './codeblock-renderer';\n\nexport class CodeBlockNode extends generateDecoratorNode({nodeType: 'codeblock',\n    properties: [\n        {name: 'code', default: '', wordCount: true},\n        {name: 'language', default: ''},\n        {name: 'caption', default: '', urlType: 'html', wordCount: true}\n    ]}\n) {\n    static importDOM() {\n        return parseCodeBlockNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderCodeBlockNode(this, options);\n    }\n\n    isEmpty() {\n        return !this.__code;\n    }\n}\n\nexport function $createCodeBlockNode(dataset) {\n    return new CodeBlockNode(dataset);\n}\n\nexport function $isCodeBlockNode(node) {\n    return node instanceof CodeBlockNode;\n}\n","import markdownHtmlRenderer from '@tryghost/kg-markdown-html-renderer';\nimport {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\nexport function renderMarkdownNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const html = markdownHtmlRenderer.render(node.markdown || '', options);\n\n    const element = document.createElement('div');\n    element.innerHTML = html;\n\n    // `type: 'inner'` will render only the innerHTML of the element\n    // @see @tryghost/kg-lexical-html-renderer package\n    return {element, type: 'inner'};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderMarkdownNode} from './markdown-renderer';\n\nexport class MarkdownNode extends generateDecoratorNode({nodeType: 'markdown',\n    properties: [\n        {name: 'markdown', default: '', urlType: 'markdown', wordCount: true}\n    ]}\n) {\n    exportDOM(options = {}) {\n        return renderMarkdownNode(this, options);\n    }\n\n    isEmpty() {\n        return !this.__markdown;\n    }\n}\n\nexport function $createMarkdownNode(dataset) {\n    return new MarkdownNode(dataset);\n}\n\nexport function $isMarkdownNode(node) {\n    return node instanceof MarkdownNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element';\n\nexport function parseVideoNode(VideoNode) {\n    return {\n        figure: (nodeElem) => {\n            const isKgVideoCard = nodeElem.classList?.contains('kg-video-card');\n            if (nodeElem.tagName === 'FIGURE' && isKgVideoCard) {\n                return {\n                    conversion(domNode) {\n                        const videoNode = domNode.querySelector('.kg-video-container video');\n                        const durationNode = domNode.querySelector('.kg-video-duration');\n                        const videoSrc = videoNode && videoNode.src;\n                        const videoWidth = videoNode && videoNode.width;\n                        const videoHeight = videoNode && videoNode.height;\n                        const durationText = durationNode && durationNode.innerHTML.trim();\n                        const captionText = readCaptionFromElement(domNode);\n\n                        if (!videoSrc) {\n                            return null;\n                        }\n\n                        const payload = {\n                            src: videoSrc,\n                            loop: !!videoNode.loop,\n                            cardWidth: getCardWidth(videoNode)\n                        };\n\n                        if (durationText) {\n                            const [minutes, seconds] = durationText.split(':');\n                            try {\n                                payload.duration = parseInt(minutes) * 60 + parseInt(seconds);\n                            } catch (e) {\n                                // ignore duration\n                            }\n                        }\n\n                        if (domNode.dataset.kgThumbnail) {\n                            payload.thumbnailSrc = domNode.dataset.kgThumbnail;\n                        }\n\n                        if (domNode.dataset.kgCustomThumbnail) {\n                            payload.customThumbnailSrc = domNode.dataset.kgCustomThumbnail;\n                        }\n\n                        if (captionText) {\n                            payload.caption = captionText;\n                        }\n\n                        if (videoWidth) {\n                            payload.width = videoWidth;\n                        }\n\n                        if (videoHeight) {\n                            payload.height = videoHeight;\n                        }\n\n                        const node = new VideoNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n\nfunction getCardWidth(domNode) {\n    if (domNode.classList.contains('kg-width-full')) {\n        return 'full';\n    } else if (domNode.classList.contains('kg-width-wide')) {\n        return 'wide';\n    } else {\n        return 'regular';\n    }\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderVideoNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    if (!node.src || node.src.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    const cardClasses = getCardClasses(node).join(' ');\n\n    const htmlString = options.target === 'email'\n        ? emailCardTemplate({node, options, cardClasses})\n        : cardTemplate({node, cardClasses});\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString.trim();\n\n    return {element: element.firstElementChild};\n}\n\nexport function cardTemplate({node, cardClasses}) {\n    const width = node.width;\n    const height = node.height;\n    const posterSpacerSrc = `https://img.spacergif.org/v1/${width}x${height}/0a/spacer.png`;\n    const autoplayAttr = node.loop ? 'loop autoplay muted' : '';\n    const thumbnailSrc = node.customThumbnailSrc || node.thumbnailSrc;\n    const hideControlsClass = node.loop ? ' kg-video-hide' : '';\n\n    return (\n        `\n        <figure class=\"${cardClasses}\" data-kg-thumbnail=${node.thumbnailSrc} data-kg-custom-thumbnail=${node.customThumbnailSrc}>\n            <div class=\"kg-video-container\">\n                <video\n                    src=\"${node.src}\"\n                    poster=\"${posterSpacerSrc}\"\n                    width=\"${width}\"\n                    height=\"${height}\"\n                    ${autoplayAttr}\n                    playsinline\n                    preload=\"metadata\"\n                    style=\"background: transparent url('${thumbnailSrc}') 50% 50% / cover no-repeat;\"\n                ></video>\n                <div class=\"kg-video-overlay\">\n                    <button class=\"kg-video-large-play-icon\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                            <path d=\"M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z\"/>\n                        </svg>\n                    </button>\n                </div>\n                <div class=\"kg-video-player-container${hideControlsClass}\">\n                    <div class=\"kg-video-player\">\n                        <button class=\"kg-video-play-icon\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z\"></path>\n                            </svg>\n                        </button>\n                        <button class=\"kg-video-pause-icon kg-video-hide\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <rect x=\"3\" y=\"1\" width=\"7\" height=\"22\" rx=\"1.5\" ry=\"1.5\"></rect>\n                                <rect x=\"14\" y=\"1\" width=\"7\" height=\"22\" rx=\"1.5\" ry=\"1.5\"></rect>\n                            </svg>\n                        </button>\n                        <span class=\"kg-video-current-time\">0:00</span>\n                        <div class=\"kg-video-time\">\n                            /<span class=\"kg-video-duration\">${node.formattedDuration}</span>\n                        </div>\n                        <input type=\"range\" class=\"kg-video-seek-slider\" max=\"100\" value=\"0\">\n                        <button class=\"kg-video-playback-rate\">1&#215;</button>\n                        <button class=\"kg-video-unmute-icon\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M15.189 2.021a9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1.794a.249.249 0 0 1 .221.133 9.73 9.73 0 0 0 7.924 4.85h.06a1 1 0 0 0 1-1V3.02a1 1 0 0 0-1.06-.998Z\"></path>\n                            </svg>\n                        </button>\n                        <button class=\"kg-video-mute-icon kg-video-hide\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                                <path d=\"M16.177 4.3a.248.248 0 0 0 .073-.176v-1.1a1 1 0 0 0-1.061-1 9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h.114a.251.251 0 0 0 .177-.073ZM23.707 1.706A1 1 0 0 0 22.293.292l-22 22a1 1 0 0 0 0 1.414l.009.009a1 1 0 0 0 1.405-.009l6.63-6.631A.251.251 0 0 1 8.515 17a.245.245 0 0 1 .177.075 10.081 10.081 0 0 0 6.5 2.92 1 1 0 0 0 1.061-1V9.266a.247.247 0 0 1 .073-.176Z\"></path>\n                            </svg>\n                        </button>\n                        <input type=\"range\" class=\"kg-video-volume-slider\" max=\"100\" value=\"100\"/>\n                    </div>\n                </div>\n            </div>\n            ${node.caption ? `<figcaption>${node.caption}</figcaption>` : ''}\n        </figure>\n    `\n    );\n}\n\nexport function emailCardTemplate({node, options, cardClasses}) {\n    const thumbnailSrc = node.customThumbnailSrc || node.thumbnailSrc;\n    const emailTemplateMaxWidth = 600;\n    const aspectRatio = node.width / node.height;\n    const emailSpacerWidth = Math.round(emailTemplateMaxWidth / 4);\n    const emailSpacerHeight = Math.round(emailTemplateMaxWidth / aspectRatio);\n    const posterSpacerSrc = `https://img.spacergif.org/v1/${emailSpacerWidth}x${emailSpacerHeight}/0a/spacer.png`;\n    const outlookCircleLeft = Math.round((emailTemplateMaxWidth / 2) - 39);\n    const outlookCircleTop = Math.round((emailSpacerHeight / 2) - 39);\n    const outlookPlayLeft = Math.round((emailTemplateMaxWidth / 2) - 11);\n    const outlookPlayTop = Math.round((emailSpacerHeight / 2) - 17);\n\n    return (\n        `\n         <figure class=\"${cardClasses}\">\n            <!--[if !mso !vml]-->\n            <a class=\"kg-video-preview\" href=\"${options.postUrl}\" aria-label=\"Play video\" style=\"mso-hide: all\">\n                <table\n                    cellpadding=\"0\"\n                    cellspacing=\"0\"\n                    border=\"0\"\n                    width=\"100%\"\n                    background=\"${thumbnailSrc}\"\n                    role=\"presentation\"\n                    style=\"background: url('${thumbnailSrc}') left top / cover; mso-hide: all\"\n                >\n                    <tr style=\"mso-hide: all\">\n                        <td width=\"25%\" style=\"visibility: hidden; mso-hide: all\">\n                            <img src=\"${posterSpacerSrc}\" alt=\"\" width=\"100%\" border=\"0\" style=\"height: auto; opacity: 0; visibility: hidden; mso-hide: all;\">\n                        </td>\n                        <td width=\"50%\" align=\"center\" valign=\"middle\" style=\"vertical-align: middle; mso-hide: all;\">\n                            <div class=\"kg-video-play-button\" style=\"mso-hide: all\"><div style=\"mso-hide: all\"></div></div>\n                        </td>\n                        <td width=\"25%\" style=\"mso-hide: all\">&nbsp;</td>\n                    </tr>\n                </table>\n            </a>\n            <!--[endif]-->\n\n            <!--[if vml]>\n            <v:group xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" coordsize=\"${emailTemplateMaxWidth},${emailSpacerHeight}\" coordorigin=\"0,0\" href=\"${options.postUrl}\" style=\"width:${emailTemplateMaxWidth}px;height:${emailSpacerHeight}px;\">\n                <v:rect fill=\"t\" stroked=\"f\" style=\"position:absolute;width:${emailTemplateMaxWidth};height:${emailSpacerHeight};\"><v:fill src=\"${thumbnailSrc}\" type=\"frame\"/></v:rect>\n                <v:oval fill=\"t\" strokecolor=\"white\" strokeweight=\"4px\" style=\"position:absolute;left:${outlookCircleLeft};top:${outlookCircleTop};width:78;height:78\"><v:fill color=\"black\" opacity=\"30%\" /></v:oval>\n                <v:shape coordsize=\"24,32\" path=\"m,l,32,24,16,xe\" fillcolor=\"white\" stroked=\"f\" style=\"position:absolute;left:${outlookPlayLeft};top:${outlookPlayTop};width:30;height:34;\" />\n            </v:group>\n            <![endif]-->\n\n            ${node.caption ? `<figcaption>${node.caption}</figcaption>` : ''}\n        </figure>\n        `\n    );\n}\n\nexport function getCardClasses(node) {\n    let cardClasses = ['kg-card kg-video-card'];\n\n    if (node.cardWidth) {\n        cardClasses.push(`kg-width-${node.cardWidth}`);\n    }\n    if (node.caption) {\n        cardClasses.push(`kg-card-hascaption`);\n    }\n\n    return cardClasses;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseVideoNode} from './video-parser';\nimport {renderVideoNode} from './video-renderer';\nexport class VideoNode extends generateDecoratorNode({nodeType: 'video',\n    properties: [\n        {name: 'src', default: '', urlType: 'url'},\n        {name: 'caption', default: '', urlType: 'html', wordCount: true},\n        {name: 'fileName', default: ''},\n        {name: 'mimeType', default: ''},\n        {name: 'width', default: null},\n        {name: 'height', default: null},\n        {name: 'duration', default: 0},\n        {name: 'thumbnailSrc', default: '', urlType: 'url'},\n        {name: 'customThumbnailSrc', default: '', urlType: 'url'},\n        {name: 'thumbnailWidth', default: null},\n        {name: 'thumbnailHeight', default: null},\n        {name: 'cardWidth', default: 'regular'},\n        {name: 'loop', default: false}\n    ]}\n) {\n    /* override */\n    exportJSON() {\n        // checks if src is a data string\n        const {src, caption, fileName, mimeType, width, height, duration, thumbnailSrc, customThumbnailSrc, thumbnailWidth, thumbnailHeight, cardWidth, loop} = this;\n        const isBlob = src.startsWith('data:');\n\n        const dataset = {\n            type: 'video',\n            version: 1,\n            src: isBlob ? '<base64String>' : src,\n            caption,\n            fileName,\n            mimeType,\n            width,\n            height,\n            duration,\n            thumbnailSrc,\n            customThumbnailSrc,\n            thumbnailWidth,\n            thumbnailHeight,\n            cardWidth,\n            loop\n        };\n        return dataset;\n    }\n\n    static importDOM() {\n        return parseVideoNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderVideoNode(this, options);\n    }\n\n    get formattedDuration() {\n        const minutes = Math.floor(this.duration / 60);\n        const seconds = Math.floor(this.duration - (minutes * 60));\n        const paddedSeconds = String(seconds).padStart(2, '0');\n        const formattedDuration = `${minutes}:${paddedSeconds}`;\n        return formattedDuration;\n    }\n}\n\nexport const $createVideoNode = (dataset) => {\n    return new VideoNode(dataset);\n};\n\nexport function $isVideoNode(node) {\n    return node instanceof VideoNode;\n}\n","export function parseAudioNode(AudioNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgAudioCard = nodeElem.classList?.contains('kg-audio-card');\n            if (nodeElem.tagName === 'DIV' && isKgAudioCard) {\n                return {\n                    conversion(domNode) {\n                        const titleNode = domNode?.querySelector('.kg-audio-title');\n                        const audioNode = domNode?.querySelector('.kg-audio-player-container audio');\n                        const durationNode = domNode?.querySelector('.kg-audio-duration');\n                        const thumbnailNode = domNode?.querySelector('.kg-audio-thumbnail');\n                        const title = titleNode && titleNode.innerHTML.trim();\n                        const audioSrc = audioNode && audioNode.src;\n                        const thumbnailSrc = thumbnailNode && thumbnailNode.src;\n                        const durationText = durationNode && durationNode.innerHTML.trim();\n                        const payload = {\n                            src: audioSrc,\n                            title: title\n                        };\n                        if (thumbnailSrc) {\n                            payload.thumbnailSrc = thumbnailSrc;\n                        }\n\n                        if (durationText) {\n                            const [minutes, seconds = 0] = durationText.split(':');\n                            try {\n                                payload.duration = parseInt(minutes) * 60 + parseInt(seconds);\n                            } catch (e) {\n                                // ignore duration\n                            }\n                        }\n\n                        const node = new AudioNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderAudioNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (!node.src || node.src.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    const thumbnailCls = getThumbnailCls(node);\n    const emptyThumbnailCls = getEmptyThumbnailCls(node);\n\n    if (options.target === 'email') {\n        return emailTemplate(node, document, options, thumbnailCls, emptyThumbnailCls);\n    } else {\n        return frontendTemplate(node, document, thumbnailCls, emptyThumbnailCls);\n    }\n}\n\nfunction frontendTemplate(node, document, thumbnailCls, emptyThumbnailCls) {\n    const element = document.createElement('div');\n    element.setAttribute('class', 'kg-card kg-audio-card');\n    const img = document.createElement('img');\n    img.src = node.thumbnailSrc;\n    img.alt = 'audio-thumbnail';\n    img.setAttribute('class', thumbnailCls);\n    element.appendChild(img);\n\n    const emptyThumbnailDiv = document.createElement('div');\n    emptyThumbnailDiv.setAttribute('class', emptyThumbnailCls);\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('width', '24');\n    svg.setAttribute('height', '24');\n    svg.setAttribute('fill', 'none');\n    const path1 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path1.setAttribute('fill-rule', 'evenodd');\n    path1.setAttribute('clip-rule', 'evenodd');\n    path1.setAttribute('d', 'M7.5 15.33a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-2.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0ZM15 13.83a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm-2.25.75a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0Z');\n    svg.appendChild(path1);\n    const path2 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path2.setAttribute('fill-rule', 'evenodd');\n    path2.setAttribute('clip-rule', 'evenodd');\n    path2.setAttribute('d', 'M14.486 6.81A2.25 2.25 0 0 1 17.25 9v5.579a.75.75 0 0 1-1.5 0v-5.58a.75.75 0 0 0-.932-.727.755.755 0 0 1-.059.013l-4.465.744a.75.75 0 0 0-.544.72v6.33a.75.75 0 0 1-1.5 0v-6.33a2.25 2.25 0 0 1 1.763-2.194l4.473-.746Z');\n    svg.appendChild(path2);\n    const path3 = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path3.setAttribute('fill-rule', 'evenodd');\n    path3.setAttribute('clip-rule', 'evenodd');\n    path3.setAttribute('d', 'M3 1.5a.75.75 0 0 0-.75.75v19.5a.75.75 0 0 0 .75.75h18a.75.75 0 0 0 .75-.75V5.133a.75.75 0 0 0-.225-.535l-.002-.002-3-2.883A.75.75 0 0 0 18 1.5H3ZM1.409.659A2.25 2.25 0 0 1 3 0h15a2.25 2.25 0 0 1 1.568.637l.003.002 3 2.883a2.25 2.25 0 0 1 .679 1.61V21.75A2.25 2.25 0 0 1 21 24H3a2.25 2.25 0 0 1-2.25-2.25V2.25c0-.597.237-1.169.659-1.591Z');\n    svg.appendChild(path3);\n    emptyThumbnailDiv.appendChild(svg);\n\n    element.appendChild(emptyThumbnailDiv);\n\n    const audioPlayerContainer = document.createElement('div');\n    audioPlayerContainer.setAttribute('class', 'kg-audio-player-container');\n\n    const audioElement = document.createElement('audio');\n    audioElement.setAttribute('src', node.src);\n    audioElement.setAttribute('preload', 'metadata');\n    audioPlayerContainer.appendChild(audioElement);\n\n    const audioTitle = document.createElement('div');\n    audioTitle.setAttribute('class', 'kg-audio-title');\n    audioTitle.textContent = node.title;\n    audioPlayerContainer.appendChild(audioTitle);\n\n    const audioPlayer = document.createElement('div');\n    audioPlayer.setAttribute('class', 'kg-audio-player');\n    const audioPlayIcon = document.createElement('button');\n    audioPlayIcon.setAttribute('class', 'kg-audio-play-icon');\n    const audioPlayIconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    audioPlayIconSvg.setAttribute('viewBox', '0 0 24 24');\n    const playPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    playPath.setAttribute('d', 'M23.14 10.608 2.253.164A1.559 1.559 0 0 0 0 1.557v20.887a1.558 1.558 0 0 0 2.253 1.392L23.14 13.393a1.557 1.557 0 0 0 0-2.785Z');\n    audioPlayIconSvg.appendChild(playPath);\n    audioPlayIcon.appendChild(audioPlayIconSvg);\n    audioPlayer.appendChild(audioPlayIcon);\n\n    const audioPauseIcon = document.createElement('button');\n    audioPauseIcon.setAttribute('class', 'kg-audio-pause-icon kg-audio-hide');\n    const audioPauseIconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    audioPauseIconSvg.setAttribute('viewBox', '0 0 24 24');\n    const rectSvg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    rectSvg.setAttribute('x', '3');\n    rectSvg.setAttribute('y', '1');\n    rectSvg.setAttribute('width', '7');\n    rectSvg.setAttribute('height', '22');\n    rectSvg.setAttribute('rx', '1.5');\n    rectSvg.setAttribute('ry', '1.5');\n    audioPauseIconSvg.appendChild(rectSvg);\n    const rectSvg2 = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n    rectSvg2.setAttribute('x', '14');\n    rectSvg2.setAttribute('y', '1');\n    rectSvg2.setAttribute('width', '7');\n    rectSvg2.setAttribute('height', '22');\n    rectSvg2.setAttribute('rx', '1.5');\n    rectSvg2.setAttribute('ry', '1.5');\n    audioPauseIconSvg.appendChild(rectSvg2);\n    audioPauseIcon.appendChild(audioPauseIconSvg);\n    audioPlayer.appendChild(audioPauseIcon);\n\n    const audioDuration = document.createElement('span');\n    audioDuration.setAttribute('class', 'kg-audio-current-time');\n    audioDuration.textContent = '0:00';\n    audioPlayer.appendChild(audioDuration);\n\n    const audioDurationTotal = document.createElement('div');\n    audioDurationTotal.setAttribute('class', 'kg-audio-time');\n    audioDurationTotal.textContent = '/';\n    const audioDUrationNode = document.createElement('span');\n    audioDUrationNode.setAttribute('class', 'kg-audio-duration');\n    audioDUrationNode.textContent = node.duration;\n    audioDurationTotal.appendChild(audioDUrationNode);\n    audioPlayer.appendChild(audioDurationTotal);\n\n    const audioSlider = document.createElement('input');\n    audioSlider.setAttribute('type', 'range');\n    audioSlider.setAttribute('class', 'kg-audio-seek-slider');\n    audioSlider.setAttribute('max', '100');\n    audioSlider.setAttribute('value', '0');\n    audioPlayer.appendChild(audioSlider);\n\n    const playbackRate = document.createElement('button');\n    playbackRate.setAttribute('class', 'kg-audio-playback-rate');\n    playbackRate.innerHTML = '1&#215;'; // innerHTML not textContent because we need the HTML entity\n    audioPlayer.appendChild(playbackRate);\n\n    const unmuteIcon = document.createElement('button');\n    unmuteIcon.setAttribute('class', 'kg-audio-unmute-icon');\n    const unmuteIconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    unmuteIconSvg.setAttribute('viewBox', '0 0 24 24');\n    const unmutePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    unmutePath.setAttribute('d', 'M15.189 2.021a9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1.794a.249.249 0 0 1 .221.133 9.73 9.73 0 0 0 7.924 4.85h.06a1 1 0 0 0 1-1V3.02a1 1 0 0 0-1.06-.998Z');\n    unmuteIconSvg.appendChild(unmutePath);\n    unmuteIcon.appendChild(unmuteIconSvg);\n    audioPlayer.appendChild(unmuteIcon);\n\n    const muteIcon = document.createElement('button');\n    muteIcon.setAttribute('class', 'kg-audio-mute-icon kg-audio-hide');\n    const muteIconSvg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    muteIconSvg.setAttribute('viewBox', '0 0 24 24');\n    const mutePath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    mutePath.setAttribute('d', 'M16.177 4.3a.248.248 0 0 0 .073-.176v-1.1a1 1 0 0 0-1.061-1 9.728 9.728 0 0 0-7.924 4.85.249.249 0 0 1-.221.133H5.25a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h.114a.251.251 0 0 0 .177-.073ZM23.707 1.706A1 1 0 0 0 22.293.292l-22 22a1 1 0 0 0 0 1.414l.009.009a1 1 0 0 0 1.405-.009l6.63-6.631A.251.251 0 0 1 8.515 17a.245.245 0 0 1 .177.075 10.081 10.081 0 0 0 6.5 2.92 1 1 0 0 0 1.061-1V9.266a.247.247 0 0 1 .073-.176Z');\n    muteIconSvg.appendChild(mutePath);\n    muteIcon.appendChild(muteIconSvg);\n    audioPlayer.appendChild(muteIcon);\n\n    const volumeSlider = document.createElement('input');\n    volumeSlider.setAttribute('type', 'range');\n    volumeSlider.setAttribute('class', 'kg-audio-volume-slider');\n    volumeSlider.setAttribute('max', '100');\n    volumeSlider.setAttribute('value', '100');\n    audioPlayer.appendChild(volumeSlider);\n\n    audioPlayerContainer.appendChild(audioPlayer);\n    element.appendChild(audioPlayerContainer);\n\n    return {element};\n}\n\nfunction emailTemplate(node, document, options, thumbnailCls, emptyThumbnailCls) {\n    const html = (`\n        <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class=\"kg-audio-card\">\n                <tr>\n                    <td>\n                        <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                            <tr>\n                                <td width=\"60\">\n                                    <a href=\"${options.postUrl}\" style=\"display: block; width: 60px; height: 60px; padding-top: 4px; padding-right: 16px; padding-bottom: 4px; padding-left: 4px; border-radius: 2px;\">\n                                        ${node.thumbnailSrc ? `\n                                        <img src=\"${node.thumbnailSrc}\" class=\"${thumbnailCls}\" style=\"width: 60px; height: 60px; object-fit: cover; border: 0; border-radius: 2px;\">\n                                        ` : `\n                                        <img src=\"https://static.ghost.org/v4.0.0/images/audio-file-icon.png\" class=\"${emptyThumbnailCls}\" style=\"width: 24px; height: 24px; padding: 18px; border-radius: 2px;\">\n                                        `}\n                                    </a>\n                                </td>\n                                <td style=\"position: relative; vertical-align: center;\" valign=\"middle\">\n                                    <a href=\"${options.postUrl}\" style=\"position: absolute; display: block; top: 0; right: 0; bottom: 0; left: 0;\"></a>\n                                    <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                                        <tr>\n                                            <td>\n                                                <a href=\"${options.postUrl}\" class=\"kg-audio-title\">${node.title}</a>\n                                            </td>\n                                        </tr>\n                                        <tr>\n                                            <td>\n                                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                                                    <tr>\n                                                        <td width=\"24\" style=\"vertical-align: middle;\" valign=\"middle\">\n                                                            <a href=\"${options.postUrl}\" class=\"kg-audio-play-button\"></a>\n                                                        </td>\n                                                        <td style=\"vertical-align: middle;\" valign=\"middle\">\n                                                            <a href=\"${options.postUrl}\" class=\"kg-audio-duration\">${getFormattedDuration(node.duration)}<span class=\"kg-audio-link\"> â€¢ Click to play audio</span></a>\n                                                        </td>\n                                                    </tr>\n                                                </table>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>\n            `);\n\n    const container = document.createElement('div');\n    container.innerHTML = html.trim();\n\n    return {element: container.firstElementChild};\n}\n\nfunction getThumbnailCls(node) {\n    let thumbnailCls = 'kg-audio-thumbnail';\n\n    if (!node.thumbnailSrc) {\n        thumbnailCls += ' kg-audio-hide';\n    }\n\n    return thumbnailCls;\n}\n\nfunction getEmptyThumbnailCls(node) {\n    let emptyThumbnailCls = 'kg-audio-thumbnail placeholder';\n\n    if (node.thumbnailSrc) {\n        emptyThumbnailCls += ' kg-audio-hide';\n    }\n\n    return emptyThumbnailCls;\n}\n\nfunction getFormattedDuration(duration = 200) {\n    const minutes = Math.floor(duration / 60);\n    const seconds = Math.floor(duration - (minutes * 60));\n    const paddedSeconds = String(seconds).padStart(2, '0');\n    const formattedDuration = `${minutes}:${paddedSeconds}`;\n    return formattedDuration;\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseAudioNode} from './audio-parser';\nimport {renderAudioNode} from './audio-renderer';\n\nexport class AudioNode extends generateDecoratorNode({nodeType: 'audio',\n    properties: [\n        {name: 'duration', default: 0},\n        {name: 'mimeType', default: ''},\n        {name: 'src', default: '', urlType: 'url'},\n        {name: 'title', default: ''},\n        {name: 'thumbnailSrc', default: ''}\n    ]}\n) {\n    static importDOM() {\n        return parseAudioNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderAudioNode(this, options);\n    }\n}\n\nexport const $createAudioNode = (dataset) => {\n    return new AudioNode(dataset);\n};\n\nexport function $isAudioNode(node) {\n    return node instanceof AudioNode;\n}\n","export function cleanDOM(node, allowedTags) {\n    for (let i = 0; i < node.childNodes.length; i++) {\n        let child = node.childNodes[i];\n        if (child.nodeType === 1 && !allowedTags.includes(child.tagName)) {\n            while (child.firstChild) {\n                node.insertBefore(child.firstChild, child);\n            }\n            node.removeChild(child);\n            i -= 1;\n        } else if (child.nodeType === 1) {\n            cleanDOM(child, allowedTags);\n        }\n    }\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {cleanDOM} from '../../utils/clean-dom';\n\nexport function renderCalloutNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n    const element = document.createElement('div');\n\n    // backgroundColor can end up with `rgba(0, 0, 0, 0)` from old mobiledoc copy/paste\n    // that is invalid when used in a class name so fall back to `white` when we don't have\n    // something that looks like a valid class\n    if (!node.backgroundColor || !node.backgroundColor.match(/^[a-zA-Z\\d-]+$/)) {\n        node.backgroundColor = 'white';\n    }\n\n    element.classList.add('kg-card', 'kg-callout-card', `kg-callout-card-${node.backgroundColor}`);\n\n    if (node.calloutEmoji) {\n        const emojiElement = document.createElement('div');\n        emojiElement.classList.add('kg-callout-emoji');\n        emojiElement.textContent = node.calloutEmoji;\n        element.appendChild(emojiElement);\n    }\n\n    const textElement = document.createElement('div');\n    textElement.classList.add('kg-callout-text');\n\n    const temporaryContainer = document.createElement('div');\n    temporaryContainer.innerHTML = node.calloutText;\n\n    const allowedTags = ['A', 'STRONG', 'EM', 'B', 'I', 'BR'];\n    cleanDOM(temporaryContainer, allowedTags);\n\n    textElement.innerHTML = temporaryContainer.innerHTML;\n    element.appendChild(textElement);\n\n    return {element};\n}\n","const getColorTag = (nodeElem) => {\n    const colorClass = nodeElem.classList?.value?.match(/kg-callout-card-(\\w+)/);\n    return colorClass && colorClass[1];\n};\n\nexport function parseCalloutNode(CalloutNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgCalloutCard = nodeElem.classList?.contains('kg-callout-card');\n            if (nodeElem.tagName === 'DIV' && isKgCalloutCard) {\n                return {\n                    conversion(domNode) {\n                        const textNode = domNode?.querySelector('.kg-callout-text');\n                        const emojiNode = domNode?.querySelector('.kg-callout-emoji');\n                        const color = getColorTag(domNode);\n\n                        const payload = {\n                            calloutText: textNode && textNode.innerHTML.trim(),\n                            calloutEmoji: emojiNode && emojiNode.innerHTML.trim() || '',\n                            backgroundColor: color\n                        };\n\n                        const node = new CalloutNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderCalloutNode} from './callout-renderer';\nimport {parseCalloutNode} from './callout-parser';\n\nexport class CalloutNode extends generateDecoratorNode({nodeType: 'callout',\n    properties: [\n        {name: 'calloutText', default: '', wordCount: true},\n        {name: 'calloutEmoji', default: 'ðŸ’¡'},\n        {name: 'backgroundColor', default: 'blue'}\n    ]}\n) {\n    /* override */\n    constructor({calloutText, calloutEmoji, backgroundColor} = {}, key) {\n        super(key);\n        this.__calloutText = calloutText || '';\n        this.__calloutEmoji = calloutEmoji !== undefined ? calloutEmoji : 'ðŸ’¡';\n        this.__backgroundColor = backgroundColor || 'blue';\n    }\n\n    static importDOM() {\n        return parseCalloutNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderCalloutNode(this, options);\n    }\n}\n\nexport function $isCalloutNode(node) {\n    return node instanceof CalloutNode;\n}\n\nexport const $createCalloutNode = (dataset) => {\n    return new CalloutNode(dataset);\n};\n","export class AsideParser {\n    constructor(NodeClass) {\n        this.NodeClass = NodeClass;\n    }\n\n    get DOMConversionMap() {\n        const self = this;\n\n        return {\n            blockquote: () => ({\n                conversion(domNode) {\n                    const isBigQuote = domNode.classList?.contains('kg-blockquote-alt');\n                    if (domNode.tagName === 'BLOCKQUOTE' && isBigQuote) {\n                        const node = new self.NodeClass();\n                        return {node};\n                    }\n\n                    return null;\n                },\n                priority: 0\n            })\n        };\n    }\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {ElementNode} from 'lexical';\nimport {AsideParser} from './AsideParser';\n\nexport class AsideNode extends ElementNode {\n    static getType() {\n        return 'aside';\n    }\n\n    static clone(node) {\n        return new this(\n            node.__key\n        );\n    }\n\n    static get urlTransformMap() {\n        return {};\n    }\n\n    constructor(key) {\n        super(key);\n    }\n\n    static importJSON(serializedNode) {\n        const node = new this();\n        node.setFormat(serializedNode.format);\n        node.setIndent(serializedNode.indent);\n        node.setDirection(serializedNode.direction);\n        return node;\n    }\n\n    exportJSON() {\n        const dataset = {\n            ...super.exportJSON(),\n            type: 'aside',\n            version: 1\n        };\n        return dataset;\n    }\n\n    static importDOM() {\n        const parser = new AsideParser(this);\n        return parser.DOMConversionMap;\n    }\n\n    /* c8 ignore start */\n    createDOM() {\n        return document.createElement('div');\n    }\n\n    updateDOM() {\n        return false;\n    }\n\n    isInline() {\n        return false;\n    }\n    /* c8 ignore stop */\n}\n\nexport function $createAsideNode() {\n    return new AsideNode();\n}\n\nexport function $isAsideNode(node) {\n    return node instanceof AsideNode;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\nexport function renderHorizontalRuleNode(_, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const element = document.createElement('hr');\n    return {element};\n}","export function parseHorizontalRuleNode(HorizontalRuleNode) {\n    return {\n        hr: () => ({\n            conversion() {\n                const node = new HorizontalRuleNode();\n                return {node};\n            },\n            priority: 0\n        })\n    };\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderHorizontalRuleNode} from './horizontalrule-renderer';\nimport {parseHorizontalRuleNode} from './horizontalrule-parser';\n\nexport class HorizontalRuleNode extends generateDecoratorNode({nodeType: 'horizontalrule'}) {\n    static importDOM() {\n        return parseHorizontalRuleNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderHorizontalRuleNode(this, options);\n    }\n\n    getTextContent() {\n        return '---\\n\\n';\n    }\n\n    hasEditMode() {\n        return false;\n    }\n}\n\nexport function $createHorizontalRuleNode() {\n    return new HorizontalRuleNode();\n}\n\nexport function $isHorizontalRuleNode(node) {\n    return node instanceof HorizontalRuleNode;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderHtmlNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const html = node.html;\n\n    if (!html) {\n        return renderEmptyContainer(document);\n    }\n\n    const textarea = document.createElement('textarea');\n    textarea.innerHTML = html;\n\n    // `type: 'value'` will render the value of the textarea element\n    // @see @tryghost/kg-lexical-html-renderer package\n    return {element: textarea, type: 'value'};\n}\n","export function parseHtmlNode(HtmlNode) {\n    return {\n        '#comment': (nodeElem) => {\n            if (nodeElem.nodeType === 8 && nodeElem.nodeValue.trim() === 'kg-card-begin: html') {\n                return {\n                    conversion(domNode) {\n                        let html = [];\n                        let nextNode = domNode.nextSibling;\n\n                        while (nextNode && !isHtmlEndComment(nextNode)) {\n                            let currentNode = nextNode;\n                            html.push(currentNode.outerHTML);\n                            nextNode = currentNode.nextSibling;\n                            // remove nodes as we go so that they don't go through the parser\n                            currentNode.remove();\n                        }\n\n                        let payload = {html: html.join('\\n').trim()};\n                        const node = new HtmlNode(payload);\n                        return {node};\n                    },\n                    priority: 0\n                };\n            }\n\n            return null;\n        },\n        table: (nodeElem) => {\n            if (nodeElem.nodeType === 1 && nodeElem.tagName === 'TABLE' && nodeElem.parentNode.tagName !== 'TABLE') {\n                return {\n                    conversion(domNode) {\n                        const payload = {html: domNode.outerHTML};\n                        const node = new HtmlNode(payload);\n                        return {node};\n                    },\n                    priority: 0\n                };\n            }\n\n            return null;\n        }\n    };\n}\n\nfunction isHtmlEndComment(node) {\n    return node && node.nodeType === 8 && node.nodeValue === 'kg-card-end: html';\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderHtmlNode} from './html-renderer';\nimport {parseHtmlNode} from './html-parser';\n\nexport class HtmlNode extends generateDecoratorNode({nodeType: 'html',\n    properties: [\n        {name: 'html', default: '', urlType: 'html', wordCount: true}\n    ]}\n) {\n    static importDOM() {\n        return parseHtmlNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderHtmlNode(this, options);\n    }\n\n    isEmpty() {\n        return !this.__html;\n    }\n}\n\nexport function $createHtmlNode(dataset) {\n    return new HtmlNode(dataset);\n}\n\nexport function $isHtmlNode(node) {\n    return node instanceof HtmlNode;\n}\n","export function parseToggleNode(ToggleNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgToggleCard = nodeElem.classList?.contains('kg-toggle-card');\n            if (nodeElem.tagName === 'DIV' && isKgToggleCard) {\n                return {\n                    conversion(domNode) {\n                        const headingNode = domNode.querySelector('.kg-toggle-heading-text');\n                        const heading = headingNode.textContent;\n\n                        const contentNode = domNode.querySelector('.kg-toggle-content');\n                        const content = contentNode.textContent;\n\n                        const payload = {\n                            heading,\n                            content\n                        };\n\n                        const node = new ToggleNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\nfunction cardTemplate({node}) {\n    return (\n        `\n        <div class=\"kg-card kg-toggle-card\" data-kg-toggle-state=\"close\">\n            <div class=\"kg-toggle-heading\">\n                <h4 class=\"kg-toggle-heading-text\">${node.heading}</h4>\n                <button class=\"kg-toggle-card-icon\">\n                    <svg id=\"Regular\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                        <path class=\"cls-1\" d=\"M23.25,7.311,12.53,18.03a.749.749,0,0,1-1.06,0L.75,7.311\"></path>\n                    </svg>\n                </button>\n            </div>\n            <div class=\"kg-toggle-content\">${node.content}</div>\n        </div>\n        `\n    );\n}\n\nfunction emailCardTemplate({node}) {\n    return (\n        `\n        <div style=\"background: transparent;\n        border: 1px solid rgba(124, 139, 154, 0.25); border-radius: 4px; padding: 20px; margin-bottom: 1.5em;\">\n            <h4 style=\"font-size: 1.375rem; font-weight: 600; margin-bottom: 8px; margin-top:0px\">${node.heading}</h4>\n            <div style=\"font-size: 1rem; line-height: 1.5; margin-bottom: -1.5em;\">${node.content}</div>\n        </div>\n        `\n    );\n}\n\nexport function renderToggleNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    const htmlString = options.target === 'email'\n        ? emailCardTemplate({node})\n        : cardTemplate({node});\n\n    const container = document.createElement('div');\n    container.innerHTML = htmlString.trim();\n\n    const element = container.firstElementChild;\n    return {element};\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseToggleNode} from './toggle-parser';\nimport {renderToggleNode} from './toggle-renderer';\n\nexport class ToggleNode extends generateDecoratorNode({nodeType: 'toggle',\n    properties: [\n        {name: 'heading', default: '', urlType: 'html', wordCount: true},\n        {name: 'content', default: '', urlType: 'html', wordCount: true}\n    ]}\n) {\n    static importDOM() {\n        return parseToggleNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderToggleNode(this, options);\n    }\n}\n\nexport const $createToggleNode = (dataset) => {\n    return new ToggleNode(dataset);\n};\n\nexport function $isToggleNode(node) {\n    return node instanceof ToggleNode;\n}\n","export function parseButtonNode(ButtonNode) {\n    return {\n        div: (nodeElem) => {\n            const isButtonCard = nodeElem.classList?.contains('kg-button-card');\n            if (nodeElem.tagName === 'DIV' && isButtonCard) {\n                return {\n                    conversion(domNode) {\n                        const alignmentClass = nodeElem.className.match(/kg-align-(left|center)/);\n\n                        let alignment;\n                        if (alignmentClass) {\n                            alignment = alignmentClass[1];\n                        }\n\n                        const buttonNode = domNode?.querySelector('.kg-btn');\n                        const buttonUrl = buttonNode.href;\n                        const buttonText = buttonNode.textContent;\n\n                        const payload = {\n                            buttonText: buttonText,\n                            alignment: alignment,\n                            buttonUrl: buttonUrl\n                        };\n\n                        const node = new ButtonNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderButtonNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (!node.buttonUrl || node.buttonUrl.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    if (options.target === 'email') {\n        return emailTemplate(node, document);\n    } else {\n        return frontendTemplate(node, document);\n    }\n}\n\nfunction frontendTemplate(node, document) {\n    const cardClasses = getCardClasses(node);\n\n    const cardDiv = document.createElement('div');\n    cardDiv.setAttribute('class', cardClasses);\n\n    const button = document.createElement('a');\n    button.setAttribute('href', node.buttonUrl);\n    button.setAttribute('class', 'kg-btn kg-btn-accent');\n    button.textContent = node.buttonText || 'Button Title';\n\n    cardDiv.appendChild(button);\n    return {element: cardDiv};\n}\n\nfunction emailTemplate(node, document) {\n    const parent = document.createElement('p');\n\n    const buttonDiv = document.createElement('div');\n    buttonDiv.setAttribute('class', 'btn btn-accent');\n    parent.appendChild(buttonDiv);\n\n    const table = document.createElement('table');\n    table.setAttribute('border', 0);\n    table.setAttribute('cellspacing', 0);\n    table.setAttribute('cellpadding', 0);\n    table.setAttribute('align', node.alignment);\n    buttonDiv.appendChild(table);\n\n    const row = document.createElement('tr');\n    table.appendChild(row);\n\n    const cell = document.createElement('td');\n    cell.setAttribute('align', 'center');\n    row.appendChild(cell);\n\n    const button = document.createElement('a');\n    button.setAttribute('href', node.buttonUrl);\n    button.textContent = node.buttonText;\n    cell.appendChild(button);\n\n    return {element: parent};\n}\n\nfunction getCardClasses(node) {\n    let cardClasses = ['kg-card kg-button-card'];\n\n    if (node.alignment) {\n        cardClasses.push(`kg-align-${node.alignment}`);\n    }\n\n    return cardClasses.join(' ');\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseButtonNode} from './button-parser';\nimport {renderButtonNode} from './button-renderer';\n\nexport class ButtonNode extends generateDecoratorNode({nodeType: 'button',\n    properties: [\n        {name: 'buttonText', default: ''},\n        {name: 'alignment', default: 'center'},\n        {name: 'buttonUrl', default: '', urlType: 'url'}\n    ]}\n) {\n    static importDOM() {\n        return parseButtonNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderButtonNode(this, options);\n    }\n}\n\nexport const $createButtonNode = (dataset) => {\n    return new ButtonNode(dataset);\n};\n\nexport function $isButtonNode(node) {\n    return node instanceof ButtonNode;\n}\n","export function parseBookmarkNode(BookmarkNode) {\n    return {\n        figure: (nodeElem) => {\n            const isKgBookmarkCard = nodeElem.classList?.contains('kg-bookmark-card');\n            if (nodeElem.tagName === 'FIGURE' && isKgBookmarkCard) {\n                return {\n                    conversion(domNode) {\n                        const url = domNode?.querySelector('.kg-bookmark-container')?.href;\n                        const icon = domNode?.querySelector('.kg-bookmark-icon')?.src;\n                        const title = domNode?.querySelector('.kg-bookmark-title')?.textContent;\n                        const description = domNode?.querySelector('.kg-bookmark-description')?.textContent;\n                        const author = domNode?.querySelector('.kg-bookmark-publisher')?.textContent; // NOTE: This is NOT in error. The classes are reversed for theme backwards-compatibility.\n                        const publisher = domNode?.querySelector('.kg-bookmark-author')?.textContent; // NOTE: This is NOT in error. The classes are reversed for theme backwards-compatibility.\n                        const thumbnail = domNode?.querySelector('.kg-bookmark-thumbnail img')?.src;\n                        const caption = domNode?.querySelector('figure.kg-bookmark-card figcaption')?.textContent;\n                        const payload = {\n                            url: url,\n                            metadata: {\n                                icon: icon,\n                                title: title,\n                                description: description,\n                                author: author,\n                                publisher: publisher,\n                                thumbnail: thumbnail\n                            },\n                            caption: caption\n                        };\n                        const node = new BookmarkNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        },\n        div: (nodeElem) => {\n            if (nodeElem.nodeType === 1 && nodeElem.tagName === 'DIV' && nodeElem.className.match(/graf--mixtapeEmbed/)) {\n                return {\n                    conversion(domNode) {\n                        // Grab the relevant elements - Anchor wraps most of the data\n                        const anchorElement = domNode.querySelector('.markup--mixtapeEmbed-anchor');\n                        const titleElement = anchorElement.querySelector('.markup--mixtapeEmbed-strong');\n                        const descElement = anchorElement.querySelector('.markup--mixtapeEmbed-em');\n                        // Image is a top level field inside it's own a tag\n                        const imgElement = domNode.querySelector('.mixtapeImage');\n\n                        domNode.querySelector('br').remove();\n\n                        // Grab individual values from the elements\n                        const url = anchorElement.href;\n                        let title = '';\n                        let description = '';\n                        let thumbnail = '';\n\n                        if (titleElement && titleElement.innerHTML) {\n                            title = titleElement.innerHTML.trim();\n                            // Cleanup anchor so we can see what's left now that we've processed title\n                            anchorElement.removeChild(titleElement);\n                        }\n\n                        if (descElement && descElement.innerHTML) {\n                            description = descElement.innerHTML.trim();\n                            // Cleanup anchor so we can see what's left now that we've processed description\n                            anchorElement.removeChild(descElement);\n                        }\n\n                        // Publisher is the remaining text in the anchor, once title & desc are removed\n                        let publisher = anchorElement.innerHTML.trim();\n\n                        // Image is optional,\n                        // The element usually still exists with an additional has.mixtapeImage--empty class and has no background image\n                        if (imgElement && imgElement.style['background-image']) {\n                            thumbnail = imgElement.style['background-image'].match(/url\\(([^)]*?)\\)/)[1];\n                        }\n\n                        let payload = {url,\n                            metadata: {\n                                title,\n                                description,\n                                publisher,\n                                thumbnail\n                            }};\n                        const node = new BookmarkNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderBookmarkNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    if (!node.url || node.url.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    if (options.target === 'email') {\n        return emailTemplate(node, document);\n    } else {\n        return frontendTemplate(node, document);\n    }\n}\n\nfunction emailTemplate(node, document) {\n    const title = node.title;\n    const publisher = node.publisher;\n    const author = node.author;\n    const icon = node.icon;\n    const description = node.description;\n    const url = node.url;\n    const thumbnail = node.thumbnail;\n    const caption = node.caption;\n\n    const element = document.createElement('div');\n\n    const html = \n        `\n        <!--[if !mso !vml]-->\n            <figure class=\"kg-card kg-bookmark-card ${caption ? `kg-card-hascaption` : ''}\">\n                <a class=\"kg-bookmark-container\" href=\"${url}\">\n                    <div class=\"kg-bookmark-content\">\n                        <div class=\"kg-bookmark-title\">${title}</div>\n                        <div class=\"kg-bookmark-description\">${description}</div>\n                        <div class=\"kg-bookmark-metadata\">\n                            ${icon ? `<img class=\"kg-bookmark-icon\" src=\"${icon}\" alt=\"\">` : ''}\n                            ${publisher ? `<span class=\"kg-bookmark-author\" src=\"${publisher}\">${publisher}</span>` : ''}\n                            ${author ? `<span class=\"kg-bookmark-publisher\" src=\"${author}\">${author}</span>` : ''}\n                        </div>\n                    </div>\n                    ${thumbnail ? `<div class=\"kg-bookmark-thumbnail\" style=\"background-image: url('${thumbnail}')\">\n                        <img src=\"${thumbnail}\" alt=\"\"></div>` : ''}\n                </a>\n                ${caption ? `<figcaption>${caption}</figcaption>` : ''}\n            </figure>\n        <!--[endif]-->\n        <!--[if vml]>\n            <table class=\"kg-card kg-bookmark-card--outlook\" style=\"margin: 0; padding: 0; width: 100%; border: 1px solid #e5eff5; background: #ffffff; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; border-collapse: collapse; border-spacing: 0;\" width=\"100%\">\n                <tr>\n                    <td width=\"100%\" style=\"padding: 20px;\">\n                        <table style=\"margin: 0; padding: 0; border-collapse: collapse; border-spacing: 0;\">\n                            <tr>\n                                <td class=\"kg-bookmark-title--outlook\">\n                                    <a href=\"${url}\" style=\"text-decoration: none; color: #15212A; font-size: 15px; line-height: 1.5em; font-weight: 600;\">\n                                        ${title}\n                                    </a>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td>\n                                    <div class=\"kg-bookmark-description--outlook\">\n                                        <a href=\"${url}\" style=\"text-decoration: none; margin-top: 12px; color: #738a94; font-size: 13px; line-height: 1.5em; font-weight: 400;\">\n                                            ${description}\n                                        </a>\n                                    </div>\n                                </td>\n                            </tr>\n                            <tr>\n                                <td class=\"kg-bookmark-metadata--outlook\" style=\"padding-top: 14px; color: #15212A; font-size: 13px; font-weight: 400; line-height: 1.5em;\">\n                                    <table style=\"margin: 0; padding: 0; border-collapse: collapse; border-spacing: 0;\">\n                                        <tr>\n                                            ${icon ? `\n                                                <td valign=\"middle\" class=\"kg-bookmark-icon--outlook\" style=\"padding-right: 8px; font-size: 0; line-height: 1.5em;\">\n                                                    <a href=\"${url}\" style=\"text-decoration: none; color: #15212A;\">\n                                                        <img src=\"${icon}\" width=\"22\" height=\"22\" alt=\" \">\n                                                    </a>\n                                                </td>\n                                            ` : ''}\n                                            <td valign=\"middle\" class=\"kg-bookmark-byline--outlook\">\n                                                <a href=\"${url}\" style=\"text-decoration: none; color: #15212A;\">\n                                                    ${publisher}\n                                                    ${author ? `&nbsp;&#x2022;&nbsp;` : ''}\n                                                    ${author}\n                                                </a>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>\n            <div class=\"kg-bookmark-spacer--outlook\" style=\"height: 1.5em;\">&nbsp;</div>\n        <![endif]-->`;\n\n    element.innerHTML = html;\n    return {element};\n}\n\nfunction frontendTemplate(node, document) {\n    const element = document.createElement('figure');\n    const caption = node.caption;\n    let cardClass = 'kg-card kg-bookmark-card';\n    if (caption) {\n        cardClass += ' kg-card-hascaption';\n    }\n    element.setAttribute('class', cardClass);\n\n    const container = document.createElement('a');\n    container.setAttribute('class','kg-bookmark-container');\n    container.href = node.url;\n    element.appendChild(container);\n\n    const content = document.createElement('div');\n    content.setAttribute('class','kg-bookmark-content');\n    container.appendChild(content);\n\n    const title = document.createElement('div');\n    title.setAttribute('class','kg-bookmark-title');\n    title.textContent = node.title;\n    content.appendChild(title);\n\n    const description = document.createElement('div');\n    description.setAttribute('class','kg-bookmark-description');\n    description.textContent = node.description;\n    content.appendChild(description);\n\n    const metadata = document.createElement('div');\n    metadata.setAttribute('class','kg-bookmark-metadata');\n    content.appendChild(metadata);\n\n    metadata.icon = node.icon;\n    if (metadata.icon) {\n        const icon = document.createElement('img');\n        icon.setAttribute('class','kg-bookmark-icon');\n        icon.src = metadata.icon;\n        icon.alt = '';\n        metadata.appendChild(icon);\n    }\n\n    metadata.publisher = node.publisher;\n    if (metadata.publisher) {\n        const publisher = document.createElement('span');\n        publisher.setAttribute('class','kg-bookmark-author'); // NOTE: This is NOT in error. The classes are reversed for theme backwards-compatibility.\n        publisher.textContent = metadata.publisher;\n        metadata.appendChild(publisher);\n    }\n\n    metadata.author = node.author;\n    if (metadata.author) {\n        const author = document.createElement('span');\n        author.setAttribute('class','kg-bookmark-publisher'); // NOTE: This is NOT in error. The classes are reversed for theme backwards-compatibility.\n        author.textContent = metadata.author;\n        metadata.appendChild(author);\n    }\n\n    metadata.thumbnail = node.thumbnail;\n    if (metadata.thumbnail) {\n        const thumbnailDiv = document.createElement('div');\n        thumbnailDiv.setAttribute('class','kg-bookmark-thumbnail');\n        container.appendChild(thumbnailDiv);\n\n        const thumbnail = document.createElement('img');\n        thumbnail.src = metadata.thumbnail;\n        thumbnail.alt = '';\n        thumbnailDiv.appendChild(thumbnail);\n    }\n\n    if (caption) {\n        const figCaption = document.createElement('figcaption');\n        figCaption.innerHTML = caption;\n        element.appendChild(figCaption);\n    }\n\n    return {element};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseBookmarkNode} from './bookmark-parser';\nimport {renderBookmarkNode} from './bookmark-renderer';\n\nexport class BookmarkNode extends generateDecoratorNode({nodeType: 'bookmark',\n    properties: [\n        {name: 'title', default: '', wordCount: true},\n        {name: 'description', default: '', wordCount: true},\n        {name: 'url', default: '', urlType: 'url', wordCount: true},\n        {name: 'caption', default: '', wordCount: true},\n        {name: 'author', default: ''},\n        {name: 'publisher', default: ''},\n        {name: 'icon', default: '', urlType: 'url'},\n        {name: 'thumbnail', default: '', urlType: 'url'}\n    ]}\n) {\n    static importDOM() {\n        return parseBookmarkNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderBookmarkNode(this, options);\n    }\n\n    /* override */\n    constructor({url, metadata, caption} = {}, key) {\n        super(key);\n        this.__url = url || '';\n        this.__icon = metadata?.icon || '';\n        this.__title = metadata?.title || '';\n        this.__description = metadata?.description || '';\n        this.__author = metadata?.author || '';\n        this.__publisher = metadata?.publisher || '';\n        this.__thumbnail = metadata?.thumbnail || '';\n        this.__caption = caption || '';\n    }\n\n    /* @override */\n    getDataset() {\n        const self = this.getLatest();\n        return {\n            url: self.__url,\n            metadata: {\n                icon: self.__icon,\n                title: self.__title,\n                description: self.__description,\n                author: self.__author,\n                publisher: self.__publisher,\n                thumbnail: self.__thumbnail\n            },\n            caption: self.__caption\n        };\n    }\n\n    /* @override */\n    static importJSON(serializedNode) {\n        const {url, metadata, caption} = serializedNode;\n        const node = new this({\n            url,\n            metadata,\n            caption\n        });\n        return node;\n    }\n\n    /* @override */\n    exportJSON() {\n        const dataset = {\n            type: 'bookmark',\n            version: 1,\n            url: this.url,\n            metadata: {\n                icon: this.icon,\n                title: this.title,\n                description: this.description,\n                author: this.author,\n                publisher: this.publisher,\n                thumbnail: this.thumbnail\n            },\n            caption: this.caption\n        };\n        return dataset;\n    }\n\n    isEmpty() {\n        return !this.url;\n    }\n}\n\nexport const $createBookmarkNode = (dataset) => {\n    return new BookmarkNode(dataset);\n};\n\nexport function $isBookmarkNode(node) {\n    return node instanceof BookmarkNode;\n}\n","/**\n * Escape HTML special characters\n * @param {string} unsafe \n * @returns string\n */\nexport function escapeHtml(unsafe) {\n    return unsafe\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#039;');\n}","export function sizeToBytes(size) {\n    if (!size) {\n        return 0;\n    }\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const sizeParts = size.split(' ');\n    const sizeNumber = parseFloat(sizeParts[0]);\n    const sizeUnit = sizeParts[1];\n    const sizeUnitIndex = sizes.indexOf(sizeUnit);\n    if (sizeUnitIndex === -1) {\n        return 0;\n    }\n    return Math.round(sizeNumber * Math.pow(1024, sizeUnitIndex));\n}\n\nexport function bytesToSize(bytes) {\n    if (!bytes) {\n        return '0 Byte';\n    }\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) {\n        return '0 Byte';\n    }\n    const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));\n    return Math.round((bytes / Math.pow(1024, i))) + ' ' + sizes[i];\n}","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\nimport {escapeHtml} from '../../utils/escape-html';\nimport {bytesToSize} from '../../utils/size-byte-converter';\n\nexport function renderFileNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (!node.src || node.src.trim() === '') {\n        return renderEmptyContainer(document);\n    }\n\n    if (options.target === 'email') {\n        return emailTemplate(node, document, options);\n    } else {\n        return cardTemplate(node, document);\n    }\n}\n\nfunction emailTemplate(node, document, options) {\n    let iconCls;\n    if (!node.fileTitle && !node.fileCaption) {\n        iconCls = 'margin-top: 6px; height: 20px; width: 20px; max-width: 20px; padding-top: 4px; padding-bottom: 4px;';\n    } else {\n        iconCls = 'margin-top: 6px; height: 24px; width: 24px; max-width: 24px;';\n    }\n\n    const html = (`\n        <table cellspacing=\"0\" cellpadding=\"4\" border=\"0\" class=\"kg-file-card\" width=\"100%\">\n            <tr>\n                <td>\n                    <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                        <tr>\n                            <td valign=\"middle\" style=\"vertical-align: middle;\">\n                                ${node.fileTitle ? `\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\"><tr><td>\n                                    <a href=\"${escapeHtml(options.postUrl)}\" class=\"kg-file-title\">${escapeHtml(node.fileTitle)}</a>\n                                </td></tr></table>\n                                ` : ``}\n                                ${node.fileCaption ? `\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\"><tr><td>\n                                    <a href=\"${escapeHtml(options.postUrl)}\" class=\"kg-file-description\">${escapeHtml(node.fileCaption)}</a>\n                                </td></tr></table>\n                                ` : ``}\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\"><tr><td>\n                                    <a href=\"${escapeHtml(options.postUrl)}\" class=\"kg-file-meta\"><span class=\"kg-file-name\">${escapeHtml(node.fileName)}</span> &bull; ${bytesToSize(node.fileSize)}</a>\n                                </td></tr></table>\n                            </td>\n                            <td width=\"80\" valign=\"middle\" class=\"kg-file-thumbnail\">\n                                <a href=\"${escapeHtml(options.postUrl)}\" style=\"position: absolute; display: block; top: 0; right: 0; bottom: 0; left: 0;\"></a>\n                                <img src=\"https://static.ghost.org/v4.0.0/images/download-icon-darkmode.png\" style=\"${escapeHtml(iconCls)}\">\n                            </td>\n                        </tr>\n                    </table>\n                </td>\n            </tr>\n        </table>\n    `);\n\n    const container = document.createElement('div');\n    container.innerHTML = html.trim();\n\n    return {element: container.firstElementChild};\n}\n\nfunction cardTemplate(node, document) {\n    const card = document.createElement('div');\n    card.setAttribute('class', 'kg-card kg-file-card');\n\n    const container = document.createElement('a');\n    container.setAttribute('class', 'kg-file-card-container');\n    container.setAttribute('href', node.src);\n    container.setAttribute('title', 'Download');\n    container.setAttribute('download', '');\n\n    const contents = document.createElement('div');\n    contents.setAttribute('class', 'kg-file-card-contents');\n\n    const title = document.createElement('div');\n    title.setAttribute('class', 'kg-file-card-title');\n    title.textContent = node.fileTitle || '';\n\n    const caption = document.createElement('div');\n    caption.setAttribute('class', 'kg-file-card-caption');\n    caption.textContent = node.fileCaption || '';\n\n    const metadata = document.createElement('div');\n    metadata.setAttribute('class', 'kg-file-card-metadata');\n\n    const filename = document.createElement('div');\n    filename.setAttribute('class', 'kg-file-card-filename');\n    filename.textContent = node.fileName || '';\n\n    const filesize = document.createElement('div');\n    filesize.setAttribute('class', 'kg-file-card-filesize');\n    filesize.textContent = node.formattedFileSize || '';\n\n    metadata.appendChild(filename);\n    metadata.appendChild(filesize);\n\n    contents.appendChild(title);\n    contents.appendChild(caption);\n    contents.appendChild(metadata);\n\n    container.appendChild(contents);\n\n    const icon = document.createElement('div');\n    icon.setAttribute('class', 'kg-file-card-icon');\n\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttribute('viewBox', '0 0 24 24');\n\n    const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\n\n    const style = document.createElementNS('http://www.w3.org/2000/svg', 'style');\n    style.textContent = '.a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}';\n\n    defs.appendChild(style);\n\n    const titleElement = document.createElementNS('http://www.w3.org/2000/svg', 'title');\n    titleElement.textContent = 'download-circle';\n\n    const polyline = document.createElementNS('http://www.w3.org/2000/svg', 'polyline');\n    polyline.setAttribute('class', 'a');\n    polyline.setAttribute('points', '8.25 14.25 12 18 15.75 14.25');\n\n    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\n    line.setAttribute('class', 'a');\n    line.setAttribute('x1', '12');\n    line.setAttribute('y1', '6.75');\n    line.setAttribute('x2', '12');\n    line.setAttribute('y2', '18');\n\n    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\n    circle.setAttribute('class', 'a');\n    circle.setAttribute('cx', '12');\n    circle.setAttribute('cy', '12');\n    circle.setAttribute('r', '11.25');\n\n    svg.appendChild(defs);\n    svg.appendChild(titleElement);\n    svg.appendChild(polyline);\n    svg.appendChild(line);\n    svg.appendChild(circle);\n\n    icon.appendChild(svg);\n    container.appendChild(icon);\n    card.appendChild(container);\n\n    return {element: card};\n}","import {sizeToBytes} from '../../utils/size-byte-converter';\n\nexport function parseFileNode(FileNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgFileCard = nodeElem.classList?.contains('kg-file-card');\n            if (nodeElem.tagName === 'DIV' && isKgFileCard) {\n                return {\n                    conversion(domNode) {\n                        const link = domNode.querySelector('a');\n                        const src = link.getAttribute('href');\n                        const fileTitle = domNode.querySelector('.kg-file-card-title')?.textContent || '';\n                        const fileCaption = domNode.querySelector('.kg-file-card-caption')?.textContent || '';\n                        const fileName = domNode.querySelector('.kg-file-card-filename')?.textContent || '';\n                        let fileSize = sizeToBytes(domNode.querySelector('.kg-file-card-filesize')?.textContent || '');\n                        const payload = {\n                            src,\n                            fileTitle,\n                            fileCaption,\n                            fileName,\n                            fileSize\n                        };\n\n                        const node = new FileNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderFileNode} from './file-renderer';\nimport {parseFileNode} from './file-parser';\nimport {bytesToSize} from '../../utils/size-byte-converter';\n\nexport class FileNode extends generateDecoratorNode({nodeType: 'file',\n    properties: [\n        {name: 'src', default: '', urlType: 'url'},\n        {name: 'fileTitle', default: '', wordCount: true},\n        {name: 'fileCaption', default: '', wordCount: true},\n        {name: 'fileName', default: ''},\n        {name: 'fileSize', default: ''}\n    ]}\n) {\n    /* @override */\n    exportJSON() {\n        const {src, fileTitle, fileCaption, fileName, fileSize} = this;\n        const isBlob = src.startsWith('data:');\n\n        return {\n            type: 'file',\n            src: isBlob ? '<base64String>' : src,\n            fileTitle,\n            fileCaption,\n            fileName,\n            fileSize\n        };\n    }\n\n    static importDOM() {\n        return parseFileNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderFileNode(this, options);\n    }\n\n    get formattedFileSize() {\n        return bytesToSize(this.fileSize);\n    }\n}\n\nexport function $isFileNode(node) {\n    return node instanceof FileNode;\n}\n\nexport const $createFileNode = (dataset) => {\n    return new FileNode(dataset);\n};\n","export function slugify(str) {\n    // Remove HTML tags\n    str = str.replace(/<[^>]*>?/gm, '');\n\n    // Remove any non-word character with whitespace\n    str = str.replace(/[^\\w\\s]/gi, '');\n\n    // Replace any whitespace character with a dash\n    str = str.replace(/\\s+/g, '-');\n\n    // Convert to lowercase\n    str = str.toLowerCase();\n\n    return str;\n}\n","import {addCreateDocumentOption} from '../../../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../../../utils/render-empty-container';\nimport {slugify} from '../../../../utils/slugify';\n\nexport function renderHeaderNodeV1(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n\n    if (!node.header && !node.subheader && (!node.buttonEnabled || (!node.buttonUrl || !node.buttonText))) {\n        return renderEmptyContainer(document);\n    }\n\n    const templateData = {\n        size: node.size,\n        style: node.style,\n        buttonEnabled: node.buttonEnabled && Boolean(node.buttonUrl) && Boolean(node.buttonText),\n        buttonUrl: node.buttonUrl,\n        buttonText: node.buttonText,\n        header: node.header,\n        headerSlug: slugify(node.header),\n        subheader: node.subheader,\n        subheaderSlug: slugify(node.subheader),\n        hasHeader: !!node.header,\n        hasSubheader: !!node.subheader && !!node.subheader.replace(/(<br>)+$/g).trim(),\n        backgroundImageStyle: node.style === 'image' ? `background-image: url(${node.backgroundImageSrc})` : '',\n        backgroundImageSrc: node.backgroundImageSrc\n    };\n\n    const div = document.createElement('div');\n    div.classList.add('kg-card', 'kg-header-card', 'kg-width-full', `kg-size-${templateData.size}`, `kg-style-${templateData.style}`);\n    div.setAttribute('data-kg-background-image', templateData.backgroundImageSrc);\n    div.setAttribute('style', templateData.backgroundImageStyle);\n\n    if (templateData.hasHeader) {\n        const headerElement = document.createElement('h2');\n        headerElement.classList.add('kg-header-card-header');\n        headerElement.setAttribute('id', templateData.headerSlug);\n        headerElement.innerHTML = templateData.header;\n        div.appendChild(headerElement);\n    }\n\n    if (templateData.hasSubheader) {\n        const subheaderElement = document.createElement('h3');\n        subheaderElement.classList.add('kg-header-card-subheader');\n        subheaderElement.setAttribute('id', templateData.subheaderSlug);\n        subheaderElement.innerHTML = templateData.subheader;\n        div.appendChild(subheaderElement);\n    }\n\n    if (templateData.buttonEnabled) {\n        const buttonElement = document.createElement('a');\n        buttonElement.classList.add('kg-header-card-button');\n        buttonElement.setAttribute('href', templateData.buttonUrl);\n        buttonElement.textContent = templateData.buttonText;\n        div.appendChild(buttonElement);\n    }\n\n    return {element: div};\n}\n","export function parseHeaderNode(HeaderNode) {\n    return {\n        div: (nodeElem) => {\n            const isHeaderCardv1 = nodeElem.classList?.contains('kg-header-card') && !nodeElem.classList?.contains('kg-v2');\n            const isHeaderCardv2 = nodeElem.classList?.contains('kg-header-card') && nodeElem.classList?.contains('kg-v2');\n            // v1 parser\n            if (nodeElem.tagName === 'DIV' && isHeaderCardv1) {\n                return {\n                    conversion(domNode) {\n                        const div = domNode;\n                        const headerElement = domNode.querySelector('.kg-header-card-header');\n                        const subheaderElement = domNode.querySelector('.kg-header-card-subheader');\n                        const buttonElement = domNode.querySelector('.kg-header-card-button');\n                        const size = div.classList.contains('kg-size-large') ? 'large' : 'small';\n                        const style = div.classList.contains('kg-style-image') ? 'image' : 'text';\n                        const backgroundImageSrc = div.getAttribute('data-kg-background-image');\n                        const hasHeader = !!headerElement;\n                        const header = hasHeader ? headerElement.textContent : '';\n                        const hasSubheader = !!subheaderElement;\n                        const subheader = hasSubheader ? subheaderElement.textContent : '';\n                        const buttonEnabled = !!buttonElement;\n                        const buttonUrl = buttonEnabled ? buttonElement.getAttribute('href') : '';\n                        const buttonText = buttonEnabled ? buttonElement.textContent : '';\n\n                        const payload = {\n                            size,\n                            style,\n                            backgroundImageSrc,\n                            header,\n                            subheader,\n                            buttonEnabled,\n                            buttonUrl,\n                            buttonText,\n                            version: 1\n                        };\n\n                        const node = new HeaderNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n\n            // V2 parser\n            if (nodeElem.tagName === 'DIV' && isHeaderCardv2) {\n                return {\n                    conversion(domNode) {\n                        const div = domNode;\n                        const headerElement = div.querySelector('.kg-header-card-heading');\n                        const subheaderElement = div.querySelector('.kg-header-card-subheading');\n                        const buttonElement = div.querySelector('.kg-header-card-button');\n                        const alignment = div.classList.contains('kg-align-center') ? 'center' : '';\n                        const backgroundImageSrc = div.querySelector('.kg-header-card-image')?.getAttribute('src');\n                        const layout = backgroundImageSrc ? 'split' : '';\n                        const backgroundColor = div.classList.contains('kg-style-accent') ? 'accent' : div.getAttribute('data-background-color');\n                        const buttonColor = buttonElement?.getAttribute('data-button-color') || '';\n                        const textColor = headerElement?.getAttribute('data-text-color') || '';\n                        const buttonTextColor = buttonElement?.getAttribute('data-button-text-color') || '';\n                        const header = headerElement?.textContent || '';\n                        const subheader = subheaderElement?.textContent || '';\n                        const buttonEnabled = !!buttonElement;\n                        const buttonUrl = buttonEnabled ? buttonElement.getAttribute('href') : '';\n                        const buttonText = buttonEnabled ? buttonElement.textContent : '';\n\n                        const payload = {\n                            backgroundColor,\n                            buttonColor,\n                            alignment,\n                            backgroundImageSrc,\n                            layout,\n                            textColor,\n                            header,\n                            subheader,\n                            buttonEnabled,\n                            buttonUrl,\n                            buttonText,\n                            buttonTextColor,\n                            version: 2\n                        };\n\n                        const node = new HeaderNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../../../utils/add-create-document-option';\nimport {slugify} from '../../../../utils/slugify';\n\nfunction cardTemplate(nodeData) {\n    const cardClasses = getCardClasses(nodeData).join(' ');\n\n    const backgroundAccent = nodeData.backgroundColor === 'accent' ? 'kg-style-accent' : '';\n    const buttonAccent = nodeData.buttonColor === 'accent' ? 'kg-style-accent' : '';\n    const buttonStyle = nodeData.buttonColor !== 'accent' ? `background-color: ${nodeData.buttonColor};` : ``;\n    const alignment = nodeData.alignment === 'center' ? 'kg-align-center' : '';\n    const backgroundImageStyle = nodeData.backgroundColor !== 'accent' && (!nodeData.backgroundImageSrc || nodeData.layout === 'split') ? `background-color: ${nodeData.backgroundColor}` : '';\n\n    const imgTemplate = nodeData.backgroundImageSrc ? `\n        <picture><img class=\"kg-header-card-image\" src=\"${nodeData.backgroundImageSrc}\" alt=\"\" /></picture>\n    ` : ``;\n\n    const header = () => {\n        if (nodeData.header) {\n            return `<h2 id=\"${slugify(nodeData.header)}\" class=\"kg-header-card-heading\" style=\"color: ${nodeData.textColor};\" data-text-color=\"${nodeData.textColor}\">${nodeData.header}</h2>`;\n        }\n        return '';\n    };\n\n    const subheader = () => {\n        if (nodeData.subheader) {\n            return `<p id=\"${slugify(nodeData.subheader)}\" class=\"kg-header-card-subheading\" style=\"color: ${nodeData.textColor};\" data-text-color=\"${nodeData.textColor}\">${nodeData.subheader}</p>`;\n        }\n        return '';\n    };\n\n    const button = () => {\n        if (nodeData.buttonEnabled && nodeData.buttonUrl && nodeData.buttonUrl.trim() !== '') {\n            return `<a href=\"${nodeData.buttonUrl}\" class=\"kg-header-card-button ${buttonAccent}\" style=\"${buttonStyle}color: ${nodeData.buttonTextColor};\" data-button-color=\"${nodeData.buttonColor}\" data-button-text-color=\"${nodeData.buttonTextColor}\">${nodeData.buttonText}</a>`;\n        }\n        return '';\n    };\n    return `\n        <div class=\"${cardClasses} ${backgroundAccent}\" style=\"${backgroundImageStyle};\" data-background-color=\"${nodeData.backgroundColor}\">\n            ${nodeData.layout !== 'split' ? imgTemplate : ''}\n            <div class=\"kg-header-card-content\">\n                ${nodeData.layout === 'split' ? imgTemplate : ''}\n                <div class=\"kg-header-card-text ${alignment}\">\n                    ${header()}\n                    ${subheader()}\n                    ${button()}\n                </div>\n            </div>\n        </div>\n        `;\n}\n\nfunction emailTemplate(nodeData) {\n    const backgroundAccent = nodeData.backgroundColor === 'accent' ? `background-color: ${nodeData.accentColor};` : '';\n    const buttonAccent = nodeData.buttonColor === 'accent' ? `background-color: ${nodeData.accentColor};` : nodeData.buttonColor;\n    const buttonStyle = nodeData.buttonColor !== 'accent' ? `background-color: ${nodeData.buttonColor};` : '';\n    const alignment = nodeData.alignment === 'center' ? 'text-align: center;' : '';\n    const backgroundImageStyle = nodeData.backgroundImageSrc ? (nodeData.layout !== 'split' ? `background-image: url(${nodeData.backgroundImageSrc}); background-size: cover; background-position: center center;` : `background-color: ${nodeData.backgroundColor};`) : `background-color: ${nodeData.backgroundColor};`;\n    const splitImageStyle = `background-image: url(${nodeData.backgroundImageSrc}); background-size: ${nodeData.backgroundSize !== 'contain' ? 'cover' : '40%'}; background-position: center`;\n\n    return `\n        <div class=\"kg-header-card kg-v2\" style=\"color:${nodeData.textColor}; ${alignment} ${backgroundImageStyle} ${backgroundAccent}\">\n            ${nodeData.layout === 'split' && nodeData.backgroundImageSrc ? `\n                <div class=\"kg-header-card-image\" background=\"${nodeData.backgroundImageSrc}\" style=\"${splitImageStyle}\"></div>\n            ` : ''}\n            <div class=\"kg-header-card-content\" style=\"${nodeData.layout === 'split' && nodeData.backgroundSize === 'contain' ? 'padding-top: 0;' : ''}\">\n                <h2 class=\"kg-header-card-heading\" style=\"color:${nodeData.textColor};\">${nodeData.header}</h2>\n                <p class=\"kg-header-card-subheading\" style=\"color:${nodeData.textColor};\">${nodeData.subheader}</p>\n                ${nodeData.buttonEnabled && nodeData.buttonUrl && nodeData.buttonUrl.trim() !== '' ? `\n                    <a class=\"kg-header-card-button\" href=\"${nodeData.buttonUrl}\" style=\"color: ${nodeData.buttonTextColor}; ${buttonStyle} ${buttonAccent}\">${nodeData.buttonText}</a>\n                ` : ''}\n            </div>\n        </div>\n    `;\n}\n\nexport function renderHeaderNodeV2(dataset, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const node = {\n        alignment: dataset.__alignment,\n        buttonText: dataset.__buttonText,\n        buttonEnabled: dataset.__buttonEnabled,\n        buttonUrl: dataset.__buttonUrl,\n        header: dataset.__header,\n        subheader: dataset.__subheader,\n        backgroundImageSrc: dataset.__backgroundImageSrc,\n        backgroundSize: dataset.__backgroundSize,\n        backgroundColor: dataset.__backgroundColor,\n        buttonColor: dataset.__buttonColor,\n        layout: dataset.__layout,\n        textColor: dataset.__textColor,\n        buttonTextColor: dataset.__buttonTextColor,\n        swapped: dataset.__swapped,\n        accentColor: dataset.__accentColor\n    };\n\n    if (options.target === 'email') {\n        const emailDoc = options.createDocument();\n        const emailDiv = emailDoc.createElement('div');\n\n        emailDiv.innerHTML = emailTemplate(node)?.trim();\n\n        return {element: emailDiv.firstElementChild};\n        // return {element: document.createElement('div')}; // TODO\n    }\n\n    const htmlString = cardTemplate(node);\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString?.trim();\n\n    if (node.header === '') {\n        const h2Element = element.querySelector('.kg-header-card-heading');\n        if (h2Element) {\n            h2Element.remove();\n        }\n    }\n\n    if (node.subheader === '') {\n        const pElement = element.querySelector('.kg-header-card-subheading');\n        if (pElement) {\n            pElement.remove();\n        }\n    }\n\n    return {element: element.firstElementChild};\n}\n\nexport function getCardClasses(nodeData) {\n    let cardClasses = ['kg-card kg-header-card kg-v2'];\n\n    if (nodeData.layout && nodeData.layout !== 'split') {\n        cardClasses.push(`kg-width-${nodeData.layout}`);\n    }\n\n    if (nodeData.layout === 'split') {\n        cardClasses.push('kg-layout-split kg-width-full');\n    }\n\n    if (nodeData.swapped && nodeData.layout === 'split') {\n        cardClasses.push('kg-swapped');\n    }\n\n    if (nodeData.layout && nodeData.layout === 'full') {\n        cardClasses.push(`kg-content-wide`);\n    }\n\n    if (nodeData.layout === 'split') {\n        if (nodeData.backgroundSize === 'contain') {\n            cardClasses.push('kg-content-wide');\n        }\n    }\n\n    return cardClasses;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderHeaderNodeV1} from './renderers/v1/header-renderer';\nimport {parseHeaderNode} from './parsers/header-parser';\n// V2 imports below\nimport {renderHeaderNodeV2} from './renderers/v2/header-renderer';\n\n// This is our first node that has a custom version property\nexport class HeaderNode extends generateDecoratorNode({nodeType: 'header',\n    properties: [\n        {name: 'size', default: 'small'},\n        {name: 'style', default: 'dark'},\n        {name: 'buttonEnabled', default: false},\n        {name: 'buttonUrl', default: '', urlType: 'url'},\n        {name: 'buttonText', default: ''},\n        {name: 'header', default: '', urlType: 'html', wordCount: true},\n        {name: 'subheader', default: '', urlType: 'html', wordCount: true},\n        {name: 'backgroundImageSrc', default: '', urlType: 'url'},\n        // we need to initialize a new version property here so that we can separate v1 and v2\n        // we should never remove old properties, only add new ones, as this could break & corrupt existing content\n        // ref https://lexical.dev/docs/concepts/serialization#versioning--breaking-changes\n        {name: 'version', default: 1},\n        {name: 'accentColor', default: '#FF1A75'}, // this is used to have the accent color hex for email\n        // v2 properties\n        {name: 'alignment', default: 'center'},\n        {name: 'backgroundColor', default: '#000000'},\n        {name: 'backgroundSize', default: 'cover'},\n        {name: 'textColor', default: '#FFFFFF'},\n        {name: 'buttonColor', default: '#ffffff'},\n        {name: 'buttonTextColor', default: '#000000'},\n        {name: 'layout', default: 'full'}, // replaces size\n        {name: 'swapped', default: false}\n    ]}\n) {\n    static importDOM() {\n        return parseHeaderNode(this);\n    }\n\n    exportDOM(options = {}) {\n        if (this.version === 1) {\n            return renderHeaderNodeV1(this, options);\n        }\n\n        if (this.version === 2) {\n            return renderHeaderNodeV2(this, options);\n        }\n    }\n}\n\nexport const $createHeaderNode = (dataset) => {\n    return new HeaderNode(dataset);\n};\n\nexport function $isHeaderNode(node) {\n    return node instanceof HeaderNode;\n}\n","export function parsePaywallNode(PaywallNode) {\n    return {\n        '#comment': (nodeElem) => {\n            if (nodeElem.nodeType === 8 && nodeElem.nodeValue.trim() === 'members-only') {\n                return {\n                    conversion() {\n                        const node = new PaywallNode();\n                        return {node};\n                    },\n                    priority: 0\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\nexport function renderPaywallNode(_, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n    const element = document.createElement('div');\n\n    element.innerHTML = '<!--members-only-->';\n\n    // `type: 'inner'` will render only the innerHTML of the element\n    // @see @tryghost/kg-lexical-html-renderer package\n    return {element, type: 'inner'};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parsePaywallNode} from './paywall-parser';\nimport {renderPaywallNode} from './paywall-renderer';\n\nexport class PaywallNode extends generateDecoratorNode({nodeType: 'paywall'}) {\n    static importDOM() {\n        return parsePaywallNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderPaywallNode(this, options);\n    }\n}\n\nexport const $createPaywallNode = (dataset) => {\n    return new PaywallNode(dataset);\n};\n\nexport function $isPaywallNode(node) {\n    return node instanceof PaywallNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element';\n\nexport function parseProductNode(ProductNode) {\n    return {\n        div: (nodeElem) => {\n            const isKgProductCard = nodeElem.classList?.contains('kg-product-card');\n            if (nodeElem.tagName === 'DIV' && isKgProductCard) {\n                return {\n                    conversion(domNode) {\n                        const title = readCaptionFromElement(domNode, {selector: '.kg-product-card-title'});\n                        const description = readCaptionFromElement(domNode, {selector: '.kg-product-card-description'});\n\n                        const payload = {\n                            productButtonEnabled: false,\n                            productRatingEnabled: false,\n                            productTitle: title,\n                            productDescription: description\n                        };\n\n                        const img = domNode.querySelector('.kg-product-card-image');\n                        if (img && img.getAttribute('src')) {\n                            payload.productImageSrc = img.getAttribute('src');\n\n                            if (img.getAttribute('width')) {\n                                payload.productImageWidth = img.getAttribute('width');\n                            }\n\n                            if (img.getAttribute('height')) {\n                                payload.productImageHeight = img.getAttribute('height');\n                            }\n                        }\n\n                        const stars = [...domNode.querySelectorAll('.kg-product-card-rating-active')].length;\n                        if (stars) {\n                            payload.productRatingEnabled = true;\n                            payload.productStarRating = stars;\n                        }\n\n                        const button = domNode.querySelector('a');\n\n                        if (button) {\n                            const buttonUrl = button.href;\n                            const buttonText = getButtonText(button);\n\n                            if (buttonUrl && buttonText) {\n                                payload.productButtonEnabled = true;\n                                payload.productButton = buttonText;\n                                payload.productUrl = buttonUrl;\n                            }\n                        }\n\n                        if (!title && !description && !img && !button) {\n                            return null;\n                        }\n\n                        const node = new ProductNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n\nfunction getButtonText(node) {\n    let buttonText = node.textContent;\n    if (buttonText) {\n        buttonText = buttonText.replace(/\\n/g, ' ').replace(/\\s+/g, ' ').trim();\n    }\n    return buttonText;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderProductNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    if (node.isEmpty()) {\n        return renderEmptyContainer(document);\n    }\n\n    const templateData = {\n        ...node.getDataset(),\n        starIcon: `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12.729,1.2l3.346,6.629,6.44.638a.805.805,0,0,1,.5,1.374l-5.3,5.253,1.965,7.138a.813.813,0,0,1-1.151.935L12,19.934,5.48,23.163a.813.813,0,0,1-1.151-.935L6.294,15.09.99,9.837a.805.805,0,0,1,.5-1.374l6.44-.638L11.271,1.2A.819.819,0,0,1,12.729,1.2Z\"/></svg>`\n    };\n\n    const starActiveClasses = 'kg-product-card-rating-active';\n    for (let i = 1; i <= 5; i++) {\n        templateData['star' + i] = '';\n        if (node.productStarRating >= i) {\n            templateData['star' + i] = starActiveClasses;\n        }\n    }\n\n    const htmlString = options.target === 'email'\n        ? emailCardTemplate({data: templateData})\n        : cardTemplate({data: templateData});\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString.trim();\n\n    return {element: element.firstElementChild};\n}\n\nexport function cardTemplate({data}) {\n    return (\n        `\n        <div class=\"kg-card kg-product-card\">\n            <div class=\"kg-product-card-container\">\n                ${data.productImageSrc ? `<img src=\"${data.productImageSrc}\" ${data.productImageWidth ? `width=\"${data.productImageWidth}\"` : ''} ${data.productImageHeight ? `height=\"${data.productImageHeight}\"` : ''} class=\"kg-product-card-image\" loading=\"lazy\" />` : ''}\n                <div class=\"kg-product-card-title-container\">\n                    <h4 class=\"kg-product-card-title\">${data.productTitle}</h4>\n                </div>\n                ${data.productRatingEnabled ? `\n                    <div class=\"kg-product-card-rating\">\n                        <span class=\"${data.star1} kg-product-card-rating-star\">${data.starIcon}</span>\n                        <span class=\"${data.star2} kg-product-card-rating-star\">${data.starIcon}</span>\n                        <span class=\"${data.star3} kg-product-card-rating-star\">${data.starIcon}</span>\n                        <span class=\"${data.star4} kg-product-card-rating-star\">${data.starIcon}</span>\n                        <span class=\"${data.star5} kg-product-card-rating-star\">${data.starIcon}</span>\n                    </div>\n                ` : ''}\n\n                <div class=\"kg-product-card-description\">${data.productDescription}</div>\n                ${data.productButtonEnabled ? `\n                    <a href=\"${data.productUrl}\" class=\"kg-product-card-button kg-product-card-btn-accent\" target=\"_blank\" rel=\"noopener noreferrer\"><span>${data.productButton}</span></a>\n                ` : ''}\n            </div>\n        </div>\n    `\n    );\n}\n\nexport function emailCardTemplate({data}) {\n    return (\n        `\n         <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"width:100%; padding:20px; border:1px solid #E9E9E9; border-radius: 5px; margin: 0 0 1.5em; width: 100%;\">\n            ${data.productImageSrc ? `\n                <tr>\n                    <td align=\"center\" style=\"padding-top:0; padding-bottom:0; margin-bottom:0; padding-bottom:0;\">\n                        <img src=\"${data.productImageSrc}\" ${data.productImageWidth ? `width=\"${data.productImageWidth}\"` : ''} ${data.productImageHeight ? `height=\"${data.productImageHeight}\"` : ''} style=\"width: 100%; height: auto; border: none; padding-bottom: 16px;\" border=\"0\"/>\n                    </td>\n                </tr>\n            ` : ''}\n            <tr>\n                <td valign=\"top\">\n                    <h4 style=\"font-size: 22px !important; margin-top: 0 !important; margin-bottom: 0 !important; font-weight: 700;\">${data.productTitle}</h4>\n                </td>\n            </tr>\n            ${data.productRatingEnabled ? `\n                <tr style=\"padding-top:0; padding-bottom:0; margin-bottom:0; padding-bottom:0;\">\n                    <td valign=\"top\">\n                        <img src=\"${`https://static.ghost.org/v4.0.0/images/star-rating-${data.productStarRating}.png`}\" style=\"border: none; width: 96px;\" border=\"0\" />\n                    </td>\n                </tr>\n            ` : ''}\n            <tr>\n                <td style=\"padding-top:0; padding-bottom:0; margin-bottom:0; padding-bottom:0;\">\n                    <div style=\"padding-top: 8px; opacity: 0.7; font-size: 17px; line-height: 1.4; margin-bottom: -24px;\">${data.productDescription}</div>\n                </td>\n            </tr>\n            ${data.productButtonEnabled ? `\n                <tr>\n                    <td style=\"padding-top:0; padding-bottom:0; margin-bottom:0; padding-bottom:0;\">\n                        <div class=\"btn btn-accent\" style=\"box-sizing: border-box;display: table;width: 100%;padding-top: 16px;\">\n                            <a href=\"${data.productUrl}\" style=\"overflow-wrap: anywhere;border: solid 1px;border-radius: 5px;box-sizing: border-box;cursor: pointer;display: inline-block;font-size: 14px;font-weight: bold;margin: 0;padding: 0;text-decoration: none;color: #FFFFFF; width: 100%; text-align: center;\"><span style=\"display: block;padding: 12px 25px;\">${data.productButton}</span></a>\n                        </div>\n                    </td>\n                </tr>\n            ` : ''}\n        </table>\n        `\n    );\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseProductNode} from './product-parser';\nimport {renderProductNode} from './product-renderer';\n\nexport class ProductNode extends generateDecoratorNode({nodeType: 'product',\n    properties: [\n        {name: 'productImageSrc', default: '', urlType: 'url'},\n        {name: 'productImageWidth', default: null},\n        {name: 'productImageHeight', default: null},\n        {name: 'productTitle', default: '', urlType: 'html', wordCount: true},\n        {name: 'productDescription', default: '', urlType: 'html', wordCount: true},\n        {name: 'productRatingEnabled', default: false},\n        {name: 'productStarRating', default: 5},\n        {name: 'productButtonEnabled', default: false},\n        {name: 'productButton', default: ''},\n        {name: 'productUrl', default: ''}\n    ]}\n) {\n    /* override */\n    exportJSON() {\n        // checks if src is a data string\n        const {productImageSrc, productImageWidth, productImageHeight, productTitle, productDescription, productRatingEnabled, productStarRating, productButtonEnabled, productButton, productUrl} = this;\n        const isBlob = productImageSrc.startsWith('data:');\n\n        const dataset = {\n            type: 'product',\n            version: 1,\n            productImageSrc: isBlob ? '<base64String>' : productImageSrc,\n            productImageWidth,\n            productImageHeight,\n            productTitle,\n            productDescription,\n            productRatingEnabled,\n            productStarRating,\n            productButtonEnabled,\n            productButton,\n            productUrl\n\n        };\n        return dataset;\n    }\n\n    static importDOM() {\n        return parseProductNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderProductNode(this, options);\n    }\n\n    isEmpty() {\n        const isButtonFilled = this.__productButtonEnabled && this.__productUrl && this.__productButton;\n        return !this.__productTitle && !this.__productDescription && !isButtonFilled && !this.__productImageSrc && !this.__productRatingEnabled;\n    }\n}\n\nexport const $createProductNode = (dataset) => {\n    return new ProductNode(dataset);\n};\n\nexport function $isProductNode(node) {\n    return node instanceof ProductNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element.js';\n\n// TODO: add NFT card parser\nexport function parseEmbedNode(EmbedNode) {\n    return {\n        figure: (nodeElem) => {\n            if (nodeElem.nodeType === 1 && nodeElem.tagName === 'FIGURE') {\n                const iframe = nodeElem.querySelector('iframe');\n                if (iframe) {\n                    return {\n                        conversion(domNode) {\n                            const payload = _createPayloadForIframe(iframe);\n\n                            if (!payload) {\n                                return null;\n                            }\n\n                            payload.caption = readCaptionFromElement(domNode);\n\n                            const node = new EmbedNode(payload);\n                            return {node};\n                        },\n                        priority: 1\n                    };\n                }\n                const blockquote = nodeElem.querySelector('blockquote');\n                if (blockquote) {\n                    return {\n                        conversion(domNode) {\n                            const link = domNode.querySelector('a');\n                            if (!link) {\n                                return null;\n                            }\n\n                            let url = link.href;\n\n                            // If we don't have a url, or it's not an absolute URL, we can't handle this\n                            if (!url || !url.match(/^https?:\\/\\//i)) {\n                                return null;\n                            }\n\n                            let payload = {url: url};\n\n                            // append caption, remove element from blockquote\n                            payload.caption = readCaptionFromElement(domNode);\n                            let figcaption = domNode.querySelector('figcaption');\n                            figcaption?.remove();\n\n                            payload.html = domNode.innerHTML;\n\n                            const node = new EmbedNode(payload);\n                            return {node};\n                        },\n                        priority: 1\n                    };\n                }\n            }\n            return null;\n        },\n        iframe: (nodeElem) => {\n            if (nodeElem.nodeType === 1 && nodeElem.tagName === 'IFRAME') {\n                return {\n                    conversion(domNode) {\n                        const payload = _createPayloadForIframe(domNode);\n\n                        if (!payload) {\n                            return null;\n                        }\n\n                        const node = new EmbedNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n\nfunction _createPayloadForIframe(iframe) {\n    // If we don't have a src Or it's not an absolute URL, we can't handle this\n    // This regex handles http://, https:// or //\n    if (!iframe.src || !iframe.src.match(/^(https?:)?\\/\\//i)) {\n        return;\n    }\n\n    // if it's a schemaless URL, convert to https\n    if (iframe.src.match(/^\\/\\//)) {\n        iframe.src = `https:${iframe.src}`;\n    }\n\n    let payload = {\n        url: iframe.src\n    };\n\n    payload.html = iframe.outerHTML;\n\n    return payload;\n}","import {DateTime} from 'luxon';\nimport {toArray} from 'lodash';\n\nexport default function render(node, document, options) {\n    const metadata = node.metadata;\n\n    const figure = document.createElement('figure');\n    figure.setAttribute('class', 'kg-card kg-embed-card');\n\n    let html = node.html;\n\n    const tweetData = metadata && metadata.tweet_data;\n    const container = document.createElement('div');\n    const isEmail = options.target === 'email';\n\n    if (tweetData && isEmail) {\n        const tweetId = tweetData.id;\n        const numberFormatter = new Intl.NumberFormat('en-US', {\n            style: 'decimal',\n            notation: 'compact',\n            unitDisplay: 'narrow',\n            maximumFractionDigits: 1\n        });\n        const retweetCount = numberFormatter.format(tweetData.public_metrics.retweet_count);\n        const likeCount = numberFormatter.format(tweetData.public_metrics.like_count);\n        const authorUser = tweetData.users && tweetData.users.find(user => user.id === tweetData.author_id);\n        const tweetTime = DateTime.fromISO(tweetData.created_at).toLocaleString(DateTime.TIME_SIMPLE);\n        const tweetDate = DateTime.fromISO(tweetData.created_at).toLocaleString(DateTime.DATE_MED);\n\n        const mentions = tweetData.entities && tweetData.entities.mentions || [];\n        const urls = tweetData.entities && tweetData.entities.urls || [];\n        const hashtags = tweetData.entities && tweetData.entities.hashtags || [];\n        const entities = mentions.concat(urls).concat(hashtags).sort((a, b) => a.start - b.start);\n        let tweetContent = tweetData.text;\n\n        let tweetImageUrl = null;\n        const hasImageOrVideo = tweetData.attachments && tweetData.attachments && tweetData.attachments.media_keys;\n        if (hasImageOrVideo) {\n            tweetImageUrl = tweetData.includes.media[0].preview_image_url || tweetData.includes.media[0].url;\n        }\n        const hasPoll = tweetData.attachments && tweetData.attachments && tweetData.attachments.poll_ids;\n\n        if (mentions) {\n            let last = 0;\n            let parts = [];\n            let content = toArray(tweetContent);\n            for (const entity of entities) {\n                let type = 'text';\n                let data = content.slice(entity.start, entity.end + 1).join('').replace(/\\n/g, '<br>');\n                if (entity.url) {\n                    if (!entity.display_url || entity.display_url.startsWith('pic.twitter.com')) {\n                        type = 'img_url';\n                    } else {\n                        type = 'url';\n                        data = data.replace(entity.url, entity.display_url);\n                    }\n                }\n                if (entity.username) {\n                    type = 'mention';\n                }\n                if (entity.tag) {\n                    type = 'hashtag';\n                }\n                parts.push({\n                    type: 'text',\n                    data: content.slice(last, entity.start).join('').replace(/\\n/g, '<br>')\n                });\n                parts.push({\n                    type: type,\n                    data: data\n                });\n                last = entity.end + 1;\n            }\n            parts.push({\n                type: 'text',\n                data: content.slice(last, content.length).join('').replace(/\\n/g, '<br>')\n            });\n\n            tweetContent = parts.reduce((partContent, part) => {\n                if (part.type === 'text') {\n                    return partContent + part.data;\n                }\n                if (part.type === 'mention') {\n                    return partContent + `<span style=\"color: #1DA1F2;\">${part.data}</span>`;\n                }\n                if (part.type === 'hashtag') {\n                    return partContent + `<span style=\"color: #1DA1F2;\">${part.data}</span>`;\n                }\n                if (part.type === 'url') {\n                    return partContent + `<span style=\"color: #1DA1F2; word-break: break-all;\">${part.data}</span>`;\n                }\n                return partContent;\n            }, '');\n        }\n\n        html = `\n        <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" class=\"kg-twitter-card\">\n            <tr>\n                <td>\n                    <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                        ${authorUser ? `\n                            <tr>\n                                ${authorUser.profile_image_url ? `<td width=\"48\" style=\"width: 48px;\">\n                                    <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"padding-left: 16px; padding-top: 16px;\"><img src=\"${authorUser.profile_image_url}\" style=\"max-width: 512px; border: none; width: 48px; height: 48px; border-radius: 999px;\" border=\"0\"></a>\n                                </td>` : ''}\n                                ${authorUser.name ? `\n                                <td style=\"line-height: 1.3em; width: 100%;\">\n                                    <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"font-size: 15px !important; font-weight: 600; width: 100%; padding-top: 20px; padding-bottom: 18px;\">${authorUser.name} <br> <span style=\"color: #ABB4BE; font-size: 14px; font-weight: 500;\">@${authorUser.username}</span></a>\n                                </td>` : ''}\n                                <td align=\"right\" width=\"24\" style=\"width: 24px;\">\n                                    <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"padding-right: 16px; padding-top: 20px; width: 24px; height: 38px;\"><img src=\"https://static.ghost.org/v4.0.0/images/twitter-logo-small.png\" width=\"24\" border=\"0\"></a>\n                                </td>\n                            </tr>\n                        ` : ''}\n                        <tr>\n                            <td colspan=\"3\">\n                                <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"font-size: 15px; line-height: 1.4em; padding-top: 8px; padding-left: 16px; padding-right: 16px; padding-bottom: 16px;\">${tweetContent}\n                                ${hasPoll ? `<br><span style=\"color: #1DA1F2;\">View poll &rarr;</span>` : ''}\n                                </a>\n                            </td>\n                        </tr>\n                        ${hasImageOrVideo ? `<tr>\n                            <td colspan=\"3\" align=\"center\" style=\"width: 100%;\">\n                                <a href=\"https://twitter.com/twitter/status/${tweetId}\" style=\"display: block; padding-top: 0; padding-left: 16px; padding-right: 16px; padding-bottom: 0;\"><img src=\"${tweetImageUrl}\" style=\"width: 100%; border: 1px solid #E9E9E9; max-width: 528px; border-radius: 10px;\" border=\"0\"></a>\n                            </td>\n                        </tr>` : ''}\n                        <tr>\n                            <td colspan=\"3\" style=\"width: 100%;\">\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                                    <tr>\n                                        <td>\n                                        <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"padding-top: 4px; padding-right: 16px; padding-bottom: 12px; padding-left: 16px;\"><span style=\"color: #838383;\">${tweetTime} &bull; ${tweetDate}</span></a>\n                                        </td>\n                                    </tr>\n                                </table>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td colspan=\"3\" style=\"width: 100%;\">\n                                <table cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"border-top: 1px solid #E9E9E9;\">\n                                    <tr>\n                                        <td>\n                                            <a href=\"https://twitter.com/twitter/status/${tweetId}\" class=\"kg-twitter-link\" style=\"padding-top: 12px; padding-right: 16px; padding-bottom: 12px; padding-left: 16px;\">\n                                                <span style=\"font-weight: 600;\">${likeCount}</span> <span style=\"color: #838383;\">likes &bull;</span>\n                                                <span style=\"font-weight: 600;\">${retweetCount}</span> <span style=\"color: #838383;\">retweets</span>\n                                            </a>\n                                        </td>\n                                    </tr>\n                                </table>\n                            </td>\n                        </tr>\n                    </table>\n                </td>\n            </tr>\n        </table>\n        `;\n    }\n\n    container.innerHTML = html.trim();\n    figure.appendChild(container);\n\n    const caption = node.caption;\n    if (caption) {\n        const figcaption = document.createElement('figcaption');\n        figcaption.innerHTML = caption;\n        figure.appendChild(figcaption);\n        figure.setAttribute('class', `${figure.getAttribute('class')} kg-card-hascaption`);\n    }\n\n    return {element: figure};\n}","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\nimport twitterRenderer from './types/twitter';\n\nexport function renderEmbedNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n    const embedType = node.embedType;\n\n    if (embedType === 'twitter') {\n        return twitterRenderer(node, document, options);\n    }\n\n    return renderTemplate(node, document, options);\n}\n\nfunction renderTemplate(node, document, options) {\n    if (node.isEmpty()) {\n        return renderEmptyContainer(document);\n    }\n    const isEmail = options.target === 'email';\n    const metadata = node.metadata;\n    const url = node.url;\n    const isVideoWithThumbnail = node.embedType === 'video' && metadata && metadata.thumbnail_url;\n    const figure = document.createElement('figure');\n    figure.setAttribute('class', 'kg-card kg-embed-card');\n\n    if (isEmail && isVideoWithThumbnail) {\n        const emailTemplateMaxWidth = 600;\n        const thumbnailAspectRatio = metadata.thumbnail_width / metadata.thumbnail_height;\n        const spacerWidth = Math.round(emailTemplateMaxWidth / 4);\n        const spacerHeight = Math.round(emailTemplateMaxWidth / thumbnailAspectRatio);\n        const html = `\n            <!--[if !mso !vml]-->\n            <a class=\"kg-video-preview\" href=\"${url}\" aria-label=\"Play video\" style=\"mso-hide: all\">\n                <table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" width=\"100%\" background=\"${metadata.thumbnail_url}\" role=\"presentation\" style=\"background: url('${metadata.thumbnail_url}') left top / cover; mso-hide: all\">\n                    <tr style=\"mso-hide: all\">\n                        <td width=\"25%\" style=\"visibility: hidden; mso-hide: all\">\n                            <img src=\"https://img.spacergif.org/v1/${spacerWidth}x${spacerHeight}/0a/spacer.png\" alt=\"\" width=\"100%\" border=\"0\" style=\"height: auto; opacity: 0; visibility: hidden; mso-hide: all;\">\n                        </td>\n                        <td width=\"50%\" align=\"center\" valign=\"middle\" style=\"vertical-align: middle; mso-hide: all;\">\n                            <div class=\"kg-video-play-button\" style=\"mso-hide: all\"><div style=\"mso-hide: all\"></div></div>\n                        </td>\n                        <td width=\"25%\" style=\"mso-hide: all\">&nbsp;</td>\n                    </tr>\n                </table>\n            </a>\n            <!--[endif]-->\n\n            <!--[if vml]>\n            <v:group xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w=\"urn:schemas-microsoft-com:office:word\" coordsize=\"${emailTemplateMaxWidth},${spacerHeight}\" coordorigin=\"0,0\" href=\"${url}\" style=\"width:${emailTemplateMaxWidth}px;height:${spacerHeight}px;\">\n                <v:rect fill=\"t\" stroked=\"f\" style=\"position:absolute;width:${emailTemplateMaxWidth};height:${spacerHeight};\"><v:fill src=\"${metadata.thumbnail_url}\" type=\"frame\"/></v:rect>\n                <v:oval fill=\"t\" strokecolor=\"white\" strokeweight=\"4px\" style=\"position:absolute;left:${Math.round((emailTemplateMaxWidth / 2) - 39)};top:${Math.round((spacerHeight / 2) - 39)};width:78;height:78\"><v:fill color=\"black\" opacity=\"30%\" /></v:oval>\n                <v:shape coordsize=\"24,32\" path=\"m,l,32,24,16,xe\" fillcolor=\"white\" stroked=\"f\" style=\"position:absolute;left:${Math.round((emailTemplateMaxWidth / 2) - 11)};top:${Math.round((spacerHeight / 2) - 17)};width:30;height:34;\" />\n            </v:group>\n            <![endif]-->\n        `;\n        figure.innerHTML = html.trim();\n    } else {\n        figure.innerHTML = node.html;\n    }\n\n    const caption = node.caption;\n    if (caption) {\n        const figcaption = document.createElement('figcaption');\n        figcaption.innerHTML = caption;\n        figure.appendChild(figcaption);\n        figure.setAttribute('class', `${figure.getAttribute('class')} kg-card-hascaption`);\n    }\n\n    return {element: figure};\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseEmbedNode} from './embed-parser';\nimport {renderEmbedNode} from './embed-renderer';\n\nexport class EmbedNode extends generateDecoratorNode({nodeType: 'embed',\n    properties: [\n        {name: 'url', default: '', urlType: 'url'},\n        {name: 'embedType', default: ''},\n        {name: 'html', default: ''},\n        {name: 'metadata', default: {}},\n        {name: 'caption', default: '', wordCount: true}\n    ]}\n) {\n    static importDOM() {\n        return parseEmbedNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderEmbedNode(this, options);\n    }\n\n    isEmpty() {\n        return !this.__url && !this.__html;\n    }\n}\n\nexport const $createEmbedNode = (dataset) => {\n    return new EmbedNode(dataset);\n};\n\nexport function $isEmbedNode(node) {\n    return node instanceof EmbedNode;\n}\n","/**\n * Removes consecutive whitespaces and newlines\n * @param {string} html\n * @returns {string}\n */\nexport function removeSpaces(html) {\n    return html.replace(/\\n/g, ' ').replace(/\\s+/g, ' ').trim();\n}\n\n/**\n * Wraps replacement strings with %%\n * This helps to prevent conflicts between code samples and our replacement strings\n * Example: {foo} -> %%{foo}%%\n * @param {string} html\n * @returns {string}\n */\nexport function wrapReplacementStrings(html) {\n    return html.replace(/\\{(\\w*?)(?:,? *\"(.*?)\")?\\}/g, '%%$&%%');\n}\n\n/**\n * Removes any <code> wrappers around replacement strings {foo}\n * Example input:  <code><span>{foo}</span></code>\n * Example output:       <span>{foo}</span>\n * @param {string} html\n * @returns {string}\n */\nexport function removeCodeWrappersFromHelpers(html,document) {\n    // parse html to make patterns easier to match\n    const tempDiv = document.createElement('div');\n    tempDiv.innerHTML = html;\n\n    const codeElements = tempDiv.querySelectorAll('code');\n    codeElements.forEach((codeElement) => {\n        const codeTextContent = codeElement.textContent;\n        // extract the content of the code element if it follows the helper pattern (e.g. {foo})\n        if (codeTextContent.match(/((.*?){.*?}(.*?))/gi)) {\n            const codeContent = codeElement.innerHTML; \n            codeElement.parentNode.replaceChild(document.createRange().createContextualFragment(codeContent), codeElement);\n        }\n    });\n\n    const cleanedHtml = tempDiv.innerHTML;\n    return cleanedHtml;\n}","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {removeSpaces, removeCodeWrappersFromHelpers, wrapReplacementStrings} from '../../utils/replacement-strings';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderEmailNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const html = node.html;\n\n    if (!html || options.target !== 'email') {\n        return renderEmptyContainer(document);\n    }\n\n    const cleanedHtml = wrapReplacementStrings(removeCodeWrappersFromHelpers(removeSpaces(html),document));\n\n    const element = document.createElement('div');\n    element.innerHTML = cleanedHtml;\n\n    // `type: 'inner'` will render only the innerHTML of the element\n    // @see @tryghost/kg-lexical-html-renderer package\n    return {element, type: 'inner'};\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderEmailNode} from './email-renderer';\n\nexport class EmailNode extends generateDecoratorNode({nodeType: 'email',\n    properties: [\n        {name: 'html', default: '', urlType: 'html'}\n    ]}\n) {\n    exportDOM(options = {}) {\n        return renderEmailNode(this, options);\n    }\n}\n\nexport const $createEmailNode = (dataset) => {\n    return new EmailNode(dataset);\n};\n\nexport function $isEmailNode(node) {\n    return node instanceof EmailNode;\n}\n","import {readCaptionFromElement} from '../../utils/read-caption-from-element.js';\nimport {readImageAttributesFromElement} from '../../utils/read-image-attributes-from-element.js';\n\nfunction readGalleryImageAttributesFromElement(element, imgNum) {\n    const image = readImageAttributesFromElement(element);\n\n    image.fileName = element.src.match(/[^/]*$/)[0];\n    image.row = Math.floor(imgNum / 3);\n\n    return image;\n}\n\nexport function parseGalleryNode(GalleryNode) {\n    return {\n        figure: (nodeElem) => {\n            // Koenig gallery card\n            if (nodeElem.classList?.contains('kg-gallery-card')) {\n                return {\n                    conversion(domNode) {\n                        const payload = {};\n                        const imgs = Array.from(domNode.querySelectorAll('img'));\n\n                        payload.images = imgs.map(readGalleryImageAttributesFromElement);\n                        payload.caption = readCaptionFromElement(domNode);\n\n                        const node = new GalleryNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n\n            return null;\n        },\n        div: (nodeElem) => {\n            // Medium \"graf\" galleries\n            function isGrafGallery(node) {\n                return node.tagName === 'DIV'\n                        && node.dataset?.paragraphCount\n                        && node.querySelectorAll('img').length > 0;\n            }\n\n            if (isGrafGallery(nodeElem)) {\n                return {\n                    conversion(domNode) {\n                        const payload = {\n                            caption: readCaptionFromElement(domNode)\n                        };\n\n                        // These galleries exist as a series of divs containing multiple figure+img.\n                        // Grab the first set of imgs...\n                        let imgs = Array.from(domNode.querySelectorAll('img'));\n\n                        // ...and then iterate over any remaining divs until we run out of matches\n                        let nextNode = domNode.nextElementSibling;\n                        while (nextNode && isGrafGallery(nextNode)) {\n                            let currentNode = nextNode;\n                            imgs = imgs.concat(Array.from(currentNode.querySelectorAll('img')));\n\n                            const currentNodeCaption = readCaptionFromElement(currentNode);\n                            if (currentNodeCaption) {\n                                payload.caption = `${payload.caption} / ${currentNodeCaption}`;\n                            }\n\n                            nextNode = currentNode.nextElementSibling;\n\n                            // remove nodes as we go so that they don't go through the parser\n                            currentNode.remove();\n                        }\n\n                        payload.images = imgs.map(readGalleryImageAttributesFromElement);\n\n                        const node = new GalleryNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n\n            // Squarespace SQS galleries\n            function isSqsGallery(node) {\n                return node.tagName === 'DIV'\n                        && node.className.match(/sqs-gallery-container/)\n                        && !node.className.match(/summary-/);\n            }\n\n            if (isSqsGallery(nodeElem)) {\n                return {\n                    conversion(domNode) {\n                        const payload = {};\n\n                        // Each image exists twice...\n                        // The first image is wrapped in `<noscript>`\n                        // The second image contains image dimensions but the src property needs to be taken from `data-src`.\n                        let imgs = Array.from(domNode.querySelectorAll('img.thumb-image'));\n\n                        imgs = imgs.map((img) => {\n                            if (!img.getAttribute('src')) {\n                                if (img.previousElementSibling.tagName === 'NOSCRIPT' && img.previousElementSibling.getElementsByTagName('img').length) {\n                                    const prevNode = img.previousElementSibling;\n                                    img.setAttribute('src', img.getAttribute('data-src'));\n                                    prevNode.remove();\n                                } else {\n                                    return undefined;\n                                }\n                            }\n\n                            return img;\n                        }).filter(img => img !== undefined);\n\n                        // Process nodes into the payload\n                        payload.images = imgs.map(readGalleryImageAttributesFromElement);\n\n                        payload.caption = readCaptionFromElement(domNode, {selector: '.meta-title'});\n\n                        const node = new GalleryNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {getAvailableImageWidths} from '../../utils/get-available-image-widths';\nimport {isLocalContentImage} from '../../utils/is-local-content-image';\nimport {isUnsplashImage} from '../../utils/is-unsplash-image';\nimport {resizeImage} from '../../utils/resize-image';\nimport {setSrcsetAttribute} from '../../utils/srcset-attribute';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nconst MAX_IMG_PER_ROW = 3;\n\nfunction isValidImage(image) {\n    return image.fileName\n        && image.src\n        && image.width\n        && image.height;\n}\n\nfunction buildStructure(images) {\n    const rows = [];\n    const noOfImages = images.length;\n\n    images.forEach((image, idx) => {\n        let row = image.row;\n\n        if (noOfImages > 1 && (noOfImages % MAX_IMG_PER_ROW === 1) && (idx === (noOfImages - 2))) {\n            row = row + 1;\n        }\n        if (!rows[row]) {\n            rows[row] = [];\n        }\n\n        rows[row].push(image);\n    });\n\n    return rows;\n}\n\nexport function renderGalleryNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const validImages = node.images.filter(isValidImage);\n    if (!validImages.length) {\n        return renderEmptyContainer(document);\n    }\n\n    const figure = document.createElement('figure');\n    figure.setAttribute('class', 'kg-card kg-gallery-card kg-width-wide');\n\n    const container = document.createElement('div');\n    container.setAttribute('class', 'kg-gallery-container');\n    figure.appendChild(container);\n\n    const rows = buildStructure(validImages);\n\n    rows.forEach((row) => {\n        const rowDiv = document.createElement('div');\n        rowDiv.setAttribute('class', 'kg-gallery-row');\n\n        row.forEach((image) => {\n            const imgDiv = document.createElement('div');\n            imgDiv.setAttribute('class', 'kg-gallery-image');\n\n            const img = document.createElement('img');\n            img.setAttribute('src', image.src);\n            img.setAttribute('width', image.width);\n            img.setAttribute('height', image.height);\n            img.setAttribute('loading', 'lazy');\n            img.setAttribute('alt', image.alt || '');\n            if (image.title) {\n                img.setAttribute('title', image.title);\n            }\n\n            // images can be resized to max width, if that's the case output\n            // the resized width/height attrs to ensure 3rd party gallery plugins\n            // aren't affected by differing sizes\n            const {canTransformImage} = options;\n            const {defaultMaxWidth} = options.imageOptimization || {};\n            if (\n                defaultMaxWidth &&\n                image.width > defaultMaxWidth &&\n                isLocalContentImage(image.src, options.siteUrl) &&\n                canTransformImage &&\n                canTransformImage(image.src)\n            ) {\n                const {width, height} = resizeImage(image, {width: defaultMaxWidth});\n                img.setAttribute('width', width);\n                img.setAttribute('height', height);\n            }\n\n            // add srcset+sizes except for email clients which do not have good support for either\n            if (options.target !== 'email') {\n                setSrcsetAttribute(img, image, options);\n\n                if (img.getAttribute('srcset') && image.width >= 720) {\n                    if (rows.length === 1 && row.length === 1 && image.width >= 1200) {\n                        img.setAttribute('sizes', '(min-width: 1200px) 1200px');\n                    } else {\n                        img.setAttribute('sizes', '(min-width: 720px) 720px');\n                    }\n                }\n            }\n\n            // Outlook is unable to properly resize images without a width/height\n            // so we modify those to fit max width (600px) and use appropriately\n            // resized images if available\n            if (options.target === 'email') {\n                // only resize if needed, width/height always exists for gallery image unline image cards\n                if (image.width > 600) {\n                    const newImageDimensions = resizeImage(image, {width: 600});\n                    img.setAttribute('width', newImageDimensions.width);\n                    img.setAttribute('height', newImageDimensions.height);\n                }\n\n                if (isLocalContentImage(image.src, options.siteUrl) && options.canTransformImage && options.canTransformImage(image.src)) {\n                    // find available image size next up from 2x600 so we can use it for the \"retina\" src\n                    const availableImageWidths = getAvailableImageWidths(image, options.imageOptimization.contentImageSizes);\n                    const srcWidth = availableImageWidths.find(width => width >= 1200);\n\n                    if (!srcWidth || srcWidth === image.width) {\n                        // do nothing, width is smaller than retina or matches the original payload src\n                    } else {\n                        const [, imagesPath, filename] = image.src.match(/(.*\\/content\\/images)\\/(.*)/);\n                        img.setAttribute('src', `${imagesPath}/size/w${srcWidth}/${filename}`);\n                    }\n                }\n\n                if (isUnsplashImage(image.src)) {\n                    const unsplashUrl = new URL(image.src);\n                    unsplashUrl.searchParams.set('w', 1200);\n                    img.setAttribute('src', unsplashUrl.href);\n                }\n            }\n\n            if (image.href) {\n                const a = document.createElement('a');\n                a.setAttribute('href', image.href);\n                a.appendChild(img);\n                imgDiv.appendChild(a);\n            } else {\n                imgDiv.appendChild(img);\n            }\n            rowDiv.appendChild(imgDiv);\n        });\n\n        container.appendChild(rowDiv);\n    });\n\n    if (node.caption) {\n        let figcaption = document.createElement('figcaption');\n        figcaption.innerHTML = node.caption;\n        figure.appendChild(figcaption);\n        figure.setAttribute('class', `${figure.getAttribute('class')} kg-card-hascaption`);\n    }\n\n    return {element: figure};\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {parseGalleryNode} from './gallery-parser';\nimport {renderGalleryNode} from './gallery-renderer';\nexport class GalleryNode extends generateDecoratorNode({nodeType: 'gallery',\n    properties: [\n        {name: 'images', default: []},\n        {name: 'caption', default: '', wordCount: true}\n    ]}\n) {\n    /* override */\n    static get urlTransformMap() {\n        return {\n            caption: 'html',\n            images: {\n                src: 'url',\n                caption: 'html'\n            }\n        };\n    }\n\n    static importDOM() {\n        return parseGalleryNode(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderGalleryNode(this, options);\n    }\n\n    hasEditMode() {\n        return false;\n    }\n}\n\nexport const $createGalleryNode = (dataset) => {\n    return new GalleryNode(dataset);\n};\n\nexport function $isGalleryNode(node) {\n    return node instanceof GalleryNode;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {removeCodeWrappersFromHelpers, removeSpaces, wrapReplacementStrings} from '../../utils/replacement-strings';\nimport {escapeHtml} from '../../utils/escape-html';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderEmailCtaNode(node, options = {}) {\n    addCreateDocumentOption(options);\n\n    const document = options.createDocument();\n    const {html, buttonText, buttonUrl, showButton, alignment, segment, showDividers} = node;\n    const hasButton = showButton && !!buttonText && !!buttonUrl;\n\n    if ((!html && !hasButton) || options.target !== 'email') {\n        return renderEmptyContainer(document);\n    }\n\n    const element = document.createElement('div');\n\n    if (segment) {\n        element.setAttribute('data-gh-segment', segment);\n    }\n\n    if (alignment === 'center') {\n        element.setAttribute('class', 'align-center');\n    }\n\n    if (showDividers) {\n        element.appendChild(document.createElement('hr'));\n    }\n\n    const cleanedHtml = wrapReplacementStrings(removeCodeWrappersFromHelpers(removeSpaces(html),document));\n    element.innerHTML = element.innerHTML + cleanedHtml;\n\n    if (hasButton) {\n        const buttonTemplate = `\n            <div class=\"btn btn-accent\">\n                <table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" align=\"${escapeHtml(alignment)}\">\n                    <tbody>\n                        <tr>\n                            <td align=\"center\">\n                                <a href=\"${escapeHtml(buttonUrl)}\">${escapeHtml(buttonText)}</a>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <p></p>\n        `; // the inline <p> element is so we get a line break if there's no separators/hr used\n\n        const cleanedButton = wrapReplacementStrings(removeCodeWrappersFromHelpers(removeSpaces(buttonTemplate),document));\n        element.innerHTML = element.innerHTML + cleanedButton;\n    }\n\n    if (showDividers) {\n        element.appendChild(document.createElement('hr'));\n    }\n\n    return {element};\n}","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderEmailCtaNode} from './email-cta-renderer';\n\nexport class EmailCtaNode extends generateDecoratorNode({nodeType: 'email-cta',\n    properties: [\n        {name: 'alignment', default: 'left'},\n        {name: 'buttonText', default: ''},\n        {name: 'buttonUrl', default: '', urlType: 'url'},\n        {name: 'html', default: '', urlType: 'html'},\n        {name: 'segment', default: 'status:free'},\n        {name: 'showButton', default: false},\n        {name: 'showDividers', default: true}\n    ]}\n) {\n    exportDOM(options = {}) {\n        return renderEmailCtaNode(this, options);\n    }\n}\n\nexport const $createEmailCtaNode = (dataset) => {\n    return new EmailCtaNode(dataset);\n};\n\nexport function $isEmailCtaNode(node) {\n    return node instanceof EmailCtaNode;\n}\n","function rgbToHex(rgb) {\n    if (rgb === 'transparent') {\n        return rgb;\n    }\n\n    try {\n        // Extract the red, green, and blue values from the RGB string\n        const [r, g, b] = rgb.match(/\\d+/g);\n        // Convert each component to hexadecimal\n        const red = parseInt(r, 10).toString(16).padStart(2, '0');\n        const green = parseInt(g, 10).toString(16).padStart(2, '0');\n        const blue = parseInt(b, 10).toString(16).padStart(2, '0');\n        // Concatenate the hexadecimal values\n        const hex = `#${red}${green}${blue}`;\n        return hex;\n    } catch (e) {\n        return null;\n    }\n}\n\nfunction getLayout(domNode) {\n    if (domNode.classList.contains('kg-layout-split')) {\n        return 'split';\n    } else if (domNode.classList.contains('kg-layout-full')) {\n        return 'full';\n    } else if (domNode.classList.contains('kg-layout-wide')) {\n        return 'wide';\n    } else {\n        return 'regular';\n    }\n}\n\nexport function signupParser(SignupNode) {\n    return {\n        div: (nodeElem) => {\n            const isSignupNode = nodeElem.dataset?.lexicalSignupForm === '';\n            if (nodeElem.tagName === 'DIV' && isSignupNode) {\n                return {\n                    conversion(domNode) {\n                        const layout = getLayout(domNode);\n                        const header = domNode.querySelector('h2')?.textContent || '';\n                        const subheader = domNode.querySelector('h3')?.textContent || '';\n                        const disclaimer = domNode.querySelector('p')?.textContent || '';\n                        const backgroundImageSrc = domNode.querySelector('.kg-signup-card-image')?.getAttribute('src');\n                        const backgroundColor = domNode.style.backgroundColor || '';\n                        const buttonColor = domNode.querySelector('.kg-signup-card-button')?.style.backgroundColor || '';\n                        const buttonText = domNode.querySelector('.kg-signup-card-button-default')?.textContent?.trim() || 'Subscribe';\n                        const buttonTextColor = domNode.querySelector('.kg-signup-card-button')?.style.color || '';\n                        const textColor = domNode.querySelector('.kg-signup-card-success')?.style.color || '';\n                        const alignment = domNode.querySelector('.kg-signup-card-text')?.classList.contains('kg-align-center') ? 'center' : 'left';\n                        const successMessage = domNode.querySelector('.kg-signup-card-success')?.textContent?.trim() || '';\n                        const labels = [...domNode.querySelectorAll('input[data-members-label]')].map(input => input.value);\n\n                        const isAccentBackground = domNode.classList?.contains('kg-style-accent') ?? false;\n                        const isAccentButton = domNode.querySelector('.kg-signup-card-button')?.classList?.contains('kg-style-accent') ?? false;\n\n                        const isSwapped = domNode.classList.contains('kg-swapped');\n                        const backgroundSize = domNode.classList.contains('kg-content-wide') ? 'contain' : 'cover';\n\n                        const payload = {\n                            layout,\n                            buttonText,\n                            header,\n                            subheader,\n                            disclaimer,\n                            backgroundImageSrc,\n                            backgroundSize,\n                            backgroundColor: isAccentBackground ? 'accent' : (rgbToHex(backgroundColor) || '#ffffff'),\n                            buttonColor: isAccentButton ? 'accent' : (rgbToHex(buttonColor) || '#ffffff'),\n                            textColor: rgbToHex(textColor) || '#ffffff',\n                            buttonTextColor: rgbToHex(buttonTextColor) || '#000000',\n                            alignment,\n                            successMessage,\n                            labels,\n                            swapped: isSwapped\n                        };\n\n                        const node = new SignupNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\n\n// ref https://ghost.org/docs/themes/members#signup-forms\n\nfunction cardTemplate(nodeData) {\n    const cardClasses = getCardClasses(nodeData).join(' ');\n\n    const backgroundAccent = nodeData.backgroundColor === 'accent' ? 'kg-style-accent' : '';\n    const buttonAccent = nodeData.buttonColor === 'accent' ? 'kg-style-accent' : '';\n    const buttonStyle = nodeData.buttonColor !== 'accent' ? `background-color: ${nodeData.buttonColor};` : ``;\n    const alignment = nodeData.alignment === 'center' ? 'kg-align-center' : '';\n    const backgroundImageStyle = nodeData.backgroundColor !== 'accent' && (!nodeData.backgroundImageSrc || nodeData.layout === 'split') ? `background-color: ${nodeData.backgroundColor}` : '';\n\n    const imgTemplate = nodeData.backgroundImageSrc ? `\n        <picture><img class=\"kg-signup-card-image\" src=\"${nodeData.backgroundImageSrc}\" alt=\"\" /></picture>\n    ` : ``;\n\n    const formTemplate = `\n        <form class=\"kg-signup-card-form\" data-members-form=\"signup\">\n            ${nodeData.labels.map(label => `<input data-members-label type=\"hidden\" value=\"${label}\" />`).join('\\n')}\n            <div class=\"kg-signup-card-fields\">\n                <input class=\"kg-signup-card-input\" id=\"email\" data-members-email=\"\" type=\"email\" required=\"true\" placeholder=\"Your email\" />\n                <button class=\"kg-signup-card-button ${buttonAccent}\" style=\"${buttonStyle}color: ${nodeData.buttonTextColor};\" type=\"submit\">\n                    <span class=\"kg-signup-card-button-default\">${nodeData.buttonText || 'Subscribe'}</span>\n                    <span class=\"kg-signup-card-button-loading\">${loadingIcon()}</span>\n                </button>\n            </div>\n            <div class=\"kg-signup-card-success\" style=\"color: ${nodeData.textColor};\">\n                ${nodeData.successMessage || 'Thanks! Now check your email to confirm.'}\n            </div>\n            <div class=\"kg-signup-card-error\" style=\"color: ${nodeData.textColor};\" data-members-error></div>\n        </form>\n        `;\n\n    return `\n        <div class=\"${cardClasses} ${backgroundAccent}\" data-lexical-signup-form style=\"${backgroundImageStyle}; display: none;\">\n            ${nodeData.layout !== 'split' ? imgTemplate : ''}\n            <div class=\"kg-signup-card-content\">\n                ${nodeData.layout === 'split' ? imgTemplate : ''}\n                <div class=\"kg-signup-card-text ${alignment}\">\n                    <h2 class=\"kg-signup-card-heading\" style=\"color: ${nodeData.textColor};\">${nodeData.header}</h2>\n                    <p class=\"kg-signup-card-subheading\" style=\"color: ${nodeData.textColor};\">${nodeData.subheader}</p>\n                    ${formTemplate}\n                    <p class=\"kg-signup-card-disclaimer\" style=\"color: ${nodeData.textColor};\">${nodeData.disclaimer}</p>\n                </div>\n            </div>\n        </div>\n        `;\n}\n\nfunction loadingIcon() {\n    return `<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" width=\"24\" viewBox=\"0 0 24 24\">\n        <g stroke-linecap=\"round\" stroke-width=\"2\" fill=\"currentColor\" stroke=\"none\" stroke-linejoin=\"round\" class=\"nc-icon-wrapper\">\n            <g class=\"nc-loop-dots-4-24-icon-o\">\n                <circle cx=\"4\" cy=\"12\" r=\"3\"></circle>\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\n                <circle cx=\"20\" cy=\"12\" r=\"3\"></circle>\n            </g>\n            <style data-cap=\"butt\">\n                .nc-loop-dots-4-24-icon-o{--animation-duration:0.8s}\n                .nc-loop-dots-4-24-icon-o *{opacity:.4;transform:scale(.75);animation:nc-loop-dots-4-anim var(--animation-duration) infinite}\n                .nc-loop-dots-4-24-icon-o :nth-child(1){transform-origin:4px 12px;animation-delay:-.3s;animation-delay:calc(var(--animation-duration)/-2.666)}\n                .nc-loop-dots-4-24-icon-o :nth-child(2){transform-origin:12px 12px;animation-delay:-.15s;animation-delay:calc(var(--animation-duration)/-5.333)}\n                .nc-loop-dots-4-24-icon-o :nth-child(3){transform-origin:20px 12px}\n                @keyframes nc-loop-dots-4-anim{0%,100%{opacity:.4;transform:scale(.75)}50%{opacity:1;transform:scale(1)}}\n            </style>\n        </g>\n    </svg>`;\n}\n\nexport function renderSignupCardToDOM(dataset, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    const node = {\n        alignment: dataset.__alignment,\n        buttonText: dataset.__buttonText,\n        header: dataset.__header,\n        subheader: dataset.__subheader,\n        disclaimer: dataset.__disclaimer,\n        backgroundImageSrc: dataset.__backgroundImageSrc,\n        backgroundSize: dataset.__backgroundSize,\n        backgroundColor: dataset.__backgroundColor,\n        buttonColor: dataset.__buttonColor,\n        labels: dataset.__labels,\n        layout: dataset.__layout,\n        textColor: dataset.__textColor,\n        buttonTextColor: dataset.__buttonTextColor,\n        successMessage: dataset.__successMessage,\n        swapped: dataset.__swapped\n    };\n\n    if (options.target === 'email') {\n        return {element: document.createElement('div')}; // Return an empty element since we don't want to render the card in email\n    }\n\n    const htmlString = cardTemplate(node);\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString?.trim();\n\n    if (node.header === '') {\n        const h2Element = element.querySelector('.kg-signup-card-heading');\n        if (h2Element) {\n            h2Element.remove();\n        }\n    }\n\n    if (node.subheader === '') {\n        const h3Element = element.querySelector('.kg-signup-card-subheading');\n        if (h3Element) {\n            h3Element.remove();\n        }\n    }\n\n    if (node.disclaimer === '') {\n        const pElement = element.querySelector('.kg-signup-card-disclaimer');\n        if (pElement) {\n            pElement.remove();\n        }\n    }\n    return {element: element.firstElementChild};\n}\n\nexport function getCardClasses(nodeData) {\n    let cardClasses = ['kg-card kg-signup-card'];\n\n    if (nodeData.layout && nodeData.layout !== 'split') {\n        cardClasses.push(`kg-width-${nodeData.layout}`);\n    }\n\n    if (nodeData.layout === 'split') {\n        cardClasses.push('kg-layout-split kg-width-full');\n    }\n\n    if (nodeData.swapped && nodeData.layout === 'split') {\n        cardClasses.push('kg-swapped');\n    }\n\n    if (nodeData.layout && nodeData.layout === 'full') {\n        cardClasses.push(`kg-content-wide`);\n    }\n\n    if (nodeData.layout === 'split') {\n        if (nodeData.backgroundSize === 'contain') {\n            cardClasses.push('kg-content-wide');\n        }\n    }\n\n    return cardClasses;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {signupParser} from './signup-parser';\nimport {renderSignupCardToDOM} from './signup-renderer';\nimport {generateDecoratorNode} from '../../generate-decorator-node';\n\nexport class SignupNode extends generateDecoratorNode({nodeType: 'signup',\n    properties: [\n        {name: 'alignment', default: 'left'},\n        {name: 'backgroundColor', default: '#F0F0F0'},\n        {name: 'backgroundImageSrc', default: ''},\n        {name: 'backgroundSize', default: 'cover'},\n        {name: 'textColor', default: '#000000'},\n        {name: 'buttonColor', default: 'accent'},\n        {name: 'buttonTextColor', default: '#FFFFFF'},\n        {name: 'buttonText', default: 'Subscribe'},\n        {name: 'disclaimer', default: '', wordCount: true},\n        {name: 'header', default: '', wordCount: true},\n        {name: 'labels', default: []},\n        {name: 'layout', default: 'wide'},\n        {name: 'subheader', default: '', wordCount: true},\n        {name: 'successMessage', default: 'Email sent! Check your inbox to complete your signup.'},\n        {name: 'swapped', default: false}\n    ]}) {\n    static importDOM() {\n        return signupParser(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderSignupCardToDOM(this, options);\n    }\n\n    // keeping some custom methods for labels as it requires some special handling\n\n    setLabels(labels) {\n        if (!Array.isArray(labels) || !labels.every(item => typeof item === 'string')) {\n            throw new Error('Invalid argument: Expected an array of strings.'); // eslint-disable-line\n        }\n\n        const writable = this.getWritable();\n        writable.__labels = labels;\n    }\n\n    addLabel(label) {\n        const writable = this.getWritable();\n        writable.__labels.push(label);\n    }\n\n    removeLabel(label) {\n        const writable = this.getWritable();\n        writable.__labels = writable.__labels.filter(l => l !== label);\n    }\n}\n\nexport const $createSignupNode = (dataset) => {\n    return new SignupNode(dataset);\n};\n\nexport function $isSignupNode(node) {\n    return node instanceof SignupNode;\n}\n","import {addCreateDocumentOption} from '../../utils/add-create-document-option';\nimport {DateTime} from 'luxon';\nimport {renderEmptyContainer} from '../../utils/render-empty-container';\n\nexport function renderCollectionNode(node, options = {}) {\n    addCreateDocumentOption(options);\n    const document = options.createDocument();\n\n    // if we have no way to fetch post data, we cannot populate the card\n    const renderData = options.renderData.get(node.getKey());\n    if (!renderData) {\n        return renderEmptyContainer(document);\n    }\n\n    const htmlString = cardTemplate(node, renderData);\n\n    const element = document.createElement('div');\n    element.innerHTML = htmlString?.trim();\n\n    return {element: element.firstElementChild};\n}\n\nfunction cardTemplate(node, posts) {\n    const {collection, postCount, layout, columns, header} = node.getDataset();\n\n    const cardClass = 'kg-card kg-collection-card kg-width-wide';\n    const headerClass = 'kg-collection-card-title';\n    const collectionClass = 'kg-collection-card-feed'\n        + (layout === 'list' ? ' kg-collection-card-list' : ' kg-collection-card-grid')\n        + ((layout === 'grid' && columns === 1) ? ' columns-1' : '')\n        + ((layout === 'grid' && columns === 2) ? ' columns-2' : '')\n        + ((layout === 'grid' && columns === 3) ? ' columns-3' : '')\n        + ((layout === 'grid' && columns === 4) ? ' columns-4' : '');\n\n    return (\n        `<div class=\"${cardClass}\" data-kg-collection-slug=\"${collection}\" data-kg-collection-limit=\"${postCount}\">\n            ${header ? `<h4 class=\"${headerClass}\">${header}</h4>` : ''}\n            <div class=\"${collectionClass}\">\n                ${posts.map(post => postTemplate(post, layout, columns)).join('')}\n            </div>\n        </div>`\n    );\n}\n\nfunction postTemplate(post, layout, columns) {\n    const {title, published_at: publishDate, excerpt, feature_image: image, reading_time: readTime, url} = post;\n\n    const imageWrapperClass = 'kg-collection-card-img';\n    const imageClass = '' \n        + ((layout === 'grid' && (columns === 1 || columns === 2)) ? ' aspect-video' : ' aspect-[3/2]')\n        + (image === null ? ' invisible' : '');\n    const titleClass = 'kg-collection-card-post-title';\n    const excerptClass = 'kg-collection-card-post-excerpt';\n    const metaClass = 'kg-collection-card-post-meta';\n    const postWrapperClass = 'kg-collection-card-post-wrapper';\n\n    return (\n        `<a href=${url} class=${postWrapperClass}>\n            <div class=\"kg-collection-card-post\">\n                ${image ? \n            `<div class=${imageWrapperClass}>\n                        <img class=${imageClass} src=\"${image}\" alt=\"${title}\" />\n                    </div>`\n            : ''}\n                <div class=\"kg-collection-card-content\">\n                    ${title ? `<h2 class=${titleClass}>${title}</h2>` : ''}\n                    ${excerpt ? `<p class=${excerptClass}>${excerpt}</p>` : ''}\n                    <div class=${metaClass}>\n                        ${publishDate ? `<p>${DateTime.fromISO(publishDate).toFormat('d LLL yyyy')}</p>` : ''}\n                        ${readTime > 0 ? `<p>&nbsp;&middot; ${readTime} min</p>` : ''}\n                    </div>\n                </div>\n            </div>\n        </a>`\n    );\n}","function getLayout(domNode) {\n    if (domNode.classList.contains('kg-collection-card-list')) {\n        return 'list';\n    } else { // should have kg-collection-card-grid\n        return 'grid';\n    }\n}\n\nfunction getColumns(domNode) {\n    if (domNode.classList.contains('columns-1')) {\n        return 1;\n    }\n    if (domNode.classList.contains('columns-2')) {\n        return 2;\n    }\n    if (domNode.classList.contains('columns-3')) {\n        return 3;\n    }\n    if (domNode.classList.contains('columns-4')) {\n        return 4;\n    }\n}\n\nexport function collectionParser(CollectionNode) {\n    return {\n        div: (nodeElem) => {\n            const isCollectionNode = nodeElem.classList?.contains('kg-collection-card');\n            if (nodeElem.tagName === 'DIV' && isCollectionNode) {\n                return {\n                    conversion(domNode) {\n                        const postCount = parseInt(domNode.getAttribute('data-kg-collection-limit'));\n                        const collection = domNode.getAttribute('data-kg-collection-slug');\n                        const layout = getLayout(domNode);\n                        const header = domNode.querySelector('.kg-collection-card-title')?.textContent || '';\n                        const columns = layout === 'list' ? 3 : getColumns(domNode); // default to 3 if switched to grid\n\n                        const payload = {\n                            collection,\n                            postCount,\n                            layout,\n                            columns,\n                            header\n                        };\n\n                        const node = new CollectionNode(payload);\n                        return {node};\n                    },\n                    priority: 1\n                };\n            }\n            return null;\n        }\n    };\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {generateDecoratorNode} from '../../generate-decorator-node';\nimport {renderCollectionNode} from './collection-renderer';\nimport {collectionParser} from './collection-parser';\n\nexport class CollectionNode extends generateDecoratorNode({nodeType: 'collection',\n    properties: [\n        {name: 'collection', default: 'latest'}, // start with empty object; might want to just store the slug\n        {name: 'postCount', default: 3},\n        {name: 'layout', default: 'grid'},\n        {name: 'columns', default: 3},\n        {name: 'header', default: '', wordCount: true}\n    ]}\n) {\n    static importDOM() {\n        return collectionParser(this);\n    }\n\n    exportDOM(options = {}) {\n        return renderCollectionNode(this, options);\n    }\n\n    hasDynamicData() {\n        return true;\n    }\n\n    async getDynamicData(options = {}) {\n        const key = this.getKey();\n        const collection = this.__collection;\n        const postCount = this.__postCount;\n        \n        if (!options?.getCollectionPosts) {\n            return;\n        }\n\n        const posts = await options.getCollectionPosts(collection, postCount);\n        return {key, data: posts};\n    }\n}\n\nexport const $createCollectionNode = (dataset) => {\n    return new CollectionNode(dataset);\n};\n\nexport function $isCollectionNode(node) {\n    return node instanceof CollectionNode;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {$isTextNode, TextNode} from 'lexical';\n\n// Since the TextNode is foundational to all Lexical packages, including the\n// plain text use case. Handling any rich text logic is undesirable. This creates\n// the need to override the TextNode to handle serialization and deserialization\n// of HTML/CSS styling properties to achieve full fidelity between JSON <-> HTML.\n//\n// https://lexical.dev/docs/concepts/serialization#handling-extended-html-styling\n\nexport const extendedTextNodeReplacement = {replace: TextNode, with: node => new ExtendedTextNode(node.__text)};\n\nexport class ExtendedTextNode extends TextNode {\n    constructor(text, key) {\n        super(text, key);\n    }\n\n    static getType() {\n        return 'extended-text';\n    }\n\n    static clone(node) {\n        return new ExtendedTextNode(node.__text, node.__key);\n    }\n\n    static importDOM() {\n        const importers = TextNode.importDOM();\n        return {\n            ...importers,\n            span: () => ({\n                conversion: patchConversion(importers?.span, convertSpanElement),\n                priority: 1\n            })\n        };\n    }\n\n    static importJSON(serializedNode) {\n        return TextNode.importJSON(serializedNode);\n    }\n\n    exportJSON() {\n        const json = super.exportJSON();\n        json.type = 'extended-text';\n        return json;\n    }\n\n    isSimpleText() {\n        return (\n            (this.__type === 'text' || this.__type === 'extended-text') &&\n            this.__mode === 0\n        );\n    }\n}\n\nfunction patchConversion(originalDOMConverter, convertFn) {\n    return (node) => {\n        const original = originalDOMConverter?.(node);\n        if (!original) {\n            return null;\n        }\n        const originalOutput = original.conversion(node);\n\n        if (!originalOutput) {\n            return originalOutput;\n        }\n\n        return {\n            ...originalOutput,\n            forChild: (lexicalNode, parent) => {\n                const originalForChild = originalOutput?.forChild ?? (x => x);\n                const result = originalForChild(lexicalNode, parent);\n                if ($isTextNode(result)) {\n                    return convertFn(result, node);\n                }\n                return result;\n            }\n        };\n    };\n}\n\nfunction convertSpanElement(lexicalNode, domNode) {\n    const span = domNode;\n\n    // Word uses span tags + font-weight for bold text\n    const hasBoldFontWeight = span.style.fontWeight === 'bold' || span.parentElement?.style.fontWeight === 'bold';\n    // Word uses span tags + font-style for italic text\n    const hasItalicFontStyle = span.style.fontStyle === 'italic' || span.parentElement?.style.fontStyle === 'italic';\n    // Word uses span tags + text-decoration for underline text\n    const hasUnderlineTextDecoration = span.style.textDecoration === 'underline' || span.parentElement?.style.textDecoration === 'underline';\n    // Word uses span tags + \"Strikethrough\" class for strikethrough text\n    const hasStrikethroughClass = span.classList.contains('Strikethrough') || span.parentElement?.classList.contains('Strikethrough');\n    // Word uses span tags + \"Highlight\" class for highlighted text\n    const hasHighlightClass = span.classList.contains('Highlight') || span.parentElement?.classList.contains('Highlight');\n\n    if (hasBoldFontWeight) {\n        lexicalNode = lexicalNode.toggleFormat('bold');\n    }\n\n    if (hasItalicFontStyle) {\n        lexicalNode = lexicalNode.toggleFormat('italic');\n    }\n\n    if (hasUnderlineTextDecoration) {\n        lexicalNode = lexicalNode.toggleFormat('underline');\n    }\n\n    if (hasStrikethroughClass) {\n        lexicalNode = lexicalNode.toggleFormat('strikethrough');\n    }\n\n    if (hasHighlightClass) {\n        lexicalNode = lexicalNode.toggleFormat('highlight');\n    }\n\n    return lexicalNode;\n}\n","/* eslint-disable ghost/filenames/match-exported-class */\nimport {HeadingNode} from '@lexical/rich-text';\n\n// Since the HeadingNode is foundational to Lexical rich-text, only using a\n// custom HeadingNode is undesirable as it means every package would need to\n// be updated to work with the custom node. Instead we can use Lexical's node\n// override/replacement mechanism to extend the default with our custom parsing\n// logic.\n//\n// https://lexical.dev/docs/concepts/serialization#handling-extended-html-styling\n\nexport const extendedHeadingNodeReplacement = {replace: HeadingNode, with: node => new ExtendedHeadingNode(node.__tag)};\n\nexport class ExtendedHeadingNode extends HeadingNode {\n    constructor(tag, key) {\n        super(tag, key);\n    }\n\n    static getType() {\n        return 'extended-heading';\n    }\n\n    static clone(node) {\n        return new ExtendedHeadingNode(node.__tag, node.__key);\n    }\n\n    static importDOM() {\n        const importers = HeadingNode.importDOM();\n        return {\n            ...importers,\n            p: patchParagraphConversion(importers?.p)\n        };\n    }\n\n    static importJSON(serializedNode) {\n        return HeadingNode.importJSON(serializedNode);\n    }\n\n    exportJSON() {\n        const json = super.exportJSON();\n        json.type = 'extended-heading';\n        return json;\n    }\n}\n\nfunction patchParagraphConversion(originalDOMConverter) {\n    return (node) => {\n        // Original matches Google Docs p node to a null conversion so it's\n        // child span is parsed as a heading. Don't prevent that here\n        const original = originalDOMConverter?.(node);\n        if (original) {\n            return original;\n        }\n\n        const p = node;\n\n        // Word uses paragraphs with role=\"heading\" to represent headings\n        // and an aria-level=\"x\" to represent the heading level\n        const hasAriaHeadingRole = p.getAttribute('role') === 'heading';\n        const hasAriaLevel = p.getAttribute('aria-level');\n\n        if (hasAriaHeadingRole && hasAriaLevel) {\n            const level = parseInt(hasAriaLevel, 10);\n            if (level > 0 && level < 7) {\n                return {\n                    conversion: () => {\n                        return {\n                            node: new ExtendedHeadingNode(`h${level}`)\n                        };\n                    },\n                    priority: 1\n                };\n            }\n        }\n\n        return null;\n    };\n}\n","import * as image from './nodes/image/ImageNode';\nimport * as codeblock from './nodes/codeblock/CodeBlockNode';\nimport * as markdown from './nodes/markdown/MarkdownNode';\nimport * as video from './nodes/video/VideoNode';\nimport * as audio from './nodes/audio/AudioNode';\nimport * as callout from './nodes/callout/CalloutNode';\nimport * as aside from './nodes/aside/AsideNode';\nimport * as horizontalrule from './nodes/horizontalrule/HorizontalRuleNode';\nimport * as html from './nodes/html/HtmlNode';\nimport * as toggle from './nodes/toggle/ToggleNode';\nimport * as button from './nodes/button/ButtonNode';\nimport * as bookmark from './nodes/bookmark/BookmarkNode';\nimport * as file from './nodes/file/FileNode';\nimport * as header from './nodes/header/HeaderNode';\nimport * as paywall from './nodes/paywall/PaywallNode';\nimport * as product from './nodes/product/ProductNode';\nimport * as embed from './nodes/embed/EmbedNode';\nimport * as email from './nodes/email/EmailNode';\nimport * as gallery from './nodes/gallery/GalleryNode';\nimport * as emailCta from './nodes/email-cta/EmailCtaNode';\nimport * as signup from './nodes/signup/SignupNode';\nimport * as collection from './nodes/collection/CollectionNode';\nimport * as textnode from './nodes/ExtendedTextNode';\nimport * as headingnode from './nodes/ExtendedHeadingNode';\n\n// re-export everything for easier importing\nexport * from './KoenigDecoratorNode';\nexport * from './nodes/image/ImageNode';\nexport * from './nodes/codeblock/CodeBlockNode';\nexport * from './nodes/markdown/MarkdownNode';\nexport * from './nodes/video/VideoNode';\nexport * from './nodes/audio/AudioNode';\nexport * from './nodes/callout/CalloutNode';\nexport * from './nodes/aside/AsideNode';\nexport * from './nodes/horizontalrule/HorizontalRuleNode';\nexport * from './nodes/html/HtmlNode';\nexport * from './nodes/toggle/ToggleNode';\nexport * from './nodes/button/ButtonNode';\nexport * from './nodes/bookmark/BookmarkNode';\nexport * from './nodes/file/FileNode';\nexport * from './nodes/header/HeaderNode';\nexport * from './nodes/paywall/PaywallNode';\nexport * from './nodes/product/ProductNode';\nexport * from './nodes/embed/EmbedNode';\nexport * from './nodes/email/EmailNode';\nexport * from './nodes/gallery/GalleryNode';\nexport * from './nodes/email-cta/EmailCtaNode';\nexport * from './nodes/signup/SignupNode';\nexport * from './nodes/collection/CollectionNode';\nexport * from './nodes/ExtendedTextNode';\nexport * from './nodes/ExtendedHeadingNode';\n\n// export convenience objects for use elsewhere\nexport const DEFAULT_NODES = [\n    textnode.ExtendedTextNode,\n    textnode.extendedTextNodeReplacement,\n    headingnode.ExtendedHeadingNode,\n    headingnode.extendedHeadingNodeReplacement,\n    codeblock.CodeBlockNode,\n    image.ImageNode,\n    markdown.MarkdownNode,\n    video.VideoNode,\n    audio.AudioNode,\n    callout.CalloutNode,\n    aside.AsideNode,\n    horizontalrule.HorizontalRuleNode,\n    html.HtmlNode,\n    file.FileNode,\n    toggle.ToggleNode,\n    button.ButtonNode,\n    header.HeaderNode,\n    bookmark.BookmarkNode,\n    paywall.PaywallNode,\n    product.ProductNode,\n    embed.EmbedNode,\n    email.EmailNode,\n    gallery.GalleryNode,\n    emailCta.EmailCtaNode,\n    signup.SignupNode,\n    collection.CollectionNode\n];\n"],"names":["KoenigDecoratorNode","DecoratorNode","$isKoenigCard","node","readTextContent","property","propertyName","propertyEditorName","value","toString","getEditorState","text","read","$getRoot","getTextContent","validateArguments","nodeType","properties","Error","message","forEach","prop","urlType","includes","wordCount","generateDecoratorNode","version","map","privateName","name","GeneratedDecoratorNode","constructor","data","key","default","getType","clone","getDataset","__key","urlTransformMap","self","getLatest","dataset","importJSON","serializedNode","exportJSON","type","reduce","obj","createDOM","document","createElement","updateDOM","isInline","hasDynamicData","hasEditMode","propertiesWithText","filter","Boolean","join","Object","defineProperty","prototype","get","set","newVal","writable","getWritable","buildCleanBasicHtmlForElement","domNode","_cleanBasicHtml","html","cleanedHtml","cleanBasicHtml","createDocument","_html","newDoc","ownerDocument","implementation","createHTMLDocument","body","innerHTML","readCaptionFromElement","element","selector","caption","figcaptions","Array","from","querySelectorAll","length","figcaption","cleanHtml","readImageAttributesFromElement","attrs","src","width","parseInt","height","getAttribute","exec","alt","title","parentNode","tagName","href","parseImageNode","ImageNode","img","conversion","priority","figure","nodeElem","querySelector","kgClass","className","match","grafClass","payload","cardWidth","getAvailableImageWidths","image","imageSizes","imageWidths","values","sort","a","b","availableImageWidths","push","isLocalContentImage","url","siteUrl","normalizedSiteUrl","replace","imagePath","test","isUnsplashImage","getSrcsetAttribute","options","imageOptimization","srcsets","contentImageSizes","canTransformImage","srcsetWidths","imagesPath","filename","srcs","srcsetWidth","unsplashUrl","URL","searchParams","setSrcsetAttribute","elem","srcset","setAttribute","resizeImage","desiredWidth","desiredHeight","ratio","resizedHeight","Math","round","resizedWidth","addCreateDocumentOption","window","renderEmptyContainer","emptyContainer","renderImageNode","trim","figureClasses","defaultMaxWidth","imageDimensions","target","imgAttributes","srcWidth","find","appendChild","isBlob","startsWith","importDOM","exportDOM","$createImageNode","$isImageNode","parseCodeBlockNode","CodeBlockNode","pre","code","textContent","preClass","codeClass","langRegex","languageMatches","language","toLowerCase","codeElement","children","renderCodeBlockNode","createTextNode","isEmpty","__code","$createCodeBlockNode","$isCodeBlockNode","renderMarkdownNode","markdownHtmlRenderer","render","markdown","MarkdownNode","__markdown","$createMarkdownNode","$isMarkdownNode","parseVideoNode","VideoNode","isKgVideoCard","classList","contains","videoNode","durationNode","videoSrc","videoWidth","videoHeight","durationText","captionText","loop","getCardWidth","minutes","seconds","split","duration","e","kgThumbnail","thumbnailSrc","kgCustomThumbnail","customThumbnailSrc","renderVideoNode","cardClasses","getCardClasses","htmlString","emailCardTemplate","cardTemplate","firstElementChild","posterSpacerSrc","autoplayAttr","hideControlsClass","formattedDuration","emailTemplateMaxWidth","aspectRatio","emailSpacerWidth","emailSpacerHeight","outlookCircleLeft","outlookCircleTop","outlookPlayLeft","outlookPlayTop","postUrl","fileName","mimeType","thumbnailWidth","thumbnailHeight","floor","paddedSeconds","String","padStart","$createVideoNode","$isVideoNode","parseAudioNode","AudioNode","div","isKgAudioCard","titleNode","audioNode","thumbnailNode","audioSrc","renderAudioNode","thumbnailCls","getThumbnailCls","emptyThumbnailCls","getEmptyThumbnailCls","emailTemplate","frontendTemplate","emptyThumbnailDiv","svg","createElementNS","path1","path2","path3","audioPlayerContainer","audioElement","audioTitle","audioPlayer","audioPlayIcon","audioPlayIconSvg","playPath","audioPauseIcon","audioPauseIconSvg","rectSvg","rectSvg2","audioDuration","audioDurationTotal","audioDUrationNode","audioSlider","playbackRate","unmuteIcon","unmuteIconSvg","unmutePath","muteIcon","muteIconSvg","mutePath","volumeSlider","getFormattedDuration","container","$createAudioNode","$isAudioNode","cleanDOM","allowedTags","i","childNodes","child","firstChild","insertBefore","removeChild","renderCalloutNode","backgroundColor","add","calloutEmoji","emojiElement","textElement","temporaryContainer","calloutText","getColorTag","colorClass","parseCalloutNode","CalloutNode","isKgCalloutCard","textNode","emojiNode","color","__calloutText","__calloutEmoji","undefined","__backgroundColor","$isCalloutNode","$createCalloutNode","AsideParser","NodeClass","DOMConversionMap","blockquote","isBigQuote","AsideNode","ElementNode","setFormat","format","setIndent","indent","setDirection","direction","parser","$createAsideNode","$isAsideNode","renderHorizontalRuleNode","_","parseHorizontalRuleNode","HorizontalRuleNode","hr","$createHorizontalRuleNode","$isHorizontalRuleNode","renderHtmlNode","textarea","parseHtmlNode","HtmlNode","nodeValue","nextNode","nextSibling","isHtmlEndComment","currentNode","outerHTML","remove","table","__html","$createHtmlNode","$isHtmlNode","parseToggleNode","ToggleNode","isKgToggleCard","headingNode","heading","contentNode","content","renderToggleNode","$createToggleNode","$isToggleNode","parseButtonNode","ButtonNode","isButtonCard","alignmentClass","alignment","buttonNode","buttonUrl","buttonText","renderButtonNode","cardDiv","button","parent","buttonDiv","row","cell","$createButtonNode","$isButtonNode","parseBookmarkNode","BookmarkNode","isKgBookmarkCard","icon","description","author","publisher","thumbnail","metadata","anchorElement","titleElement","descElement","imgElement","style","renderBookmarkNode","cardClass","thumbnailDiv","figCaption","__url","__icon","__title","__description","__author","__publisher","__thumbnail","__caption","$createBookmarkNode","$isBookmarkNode","escapeHtml","unsafe","sizeToBytes","size","sizes","sizeParts","sizeNumber","parseFloat","sizeUnit","sizeUnitIndex","indexOf","pow","bytesToSize","bytes","log","renderFileNode","iconCls","fileTitle","fileCaption","fileSize","card","contents","filesize","formattedFileSize","defs","polyline","line","circle","parseFileNode","FileNode","isKgFileCard","link","$isFileNode","$createFileNode","slugify","str","renderHeaderNodeV1","header","subheader","buttonEnabled","templateData","headerSlug","subheaderSlug","hasHeader","hasSubheader","backgroundImageStyle","backgroundImageSrc","headerElement","subheaderElement","buttonElement","parseHeaderNode","HeaderNode","isHeaderCardv1","isHeaderCardv2","layout","buttonColor","textColor","buttonTextColor","nodeData","backgroundAccent","buttonAccent","buttonStyle","imgTemplate","accentColor","splitImageStyle","backgroundSize","renderHeaderNodeV2","__alignment","__buttonText","__buttonEnabled","__buttonUrl","__header","__subheader","__backgroundImageSrc","__backgroundSize","__buttonColor","__layout","__textColor","__buttonTextColor","swapped","__swapped","__accentColor","emailDoc","emailDiv","h2Element","pElement","$createHeaderNode","$isHeaderNode","parsePaywallNode","PaywallNode","renderPaywallNode","$createPaywallNode","$isPaywallNode","parseProductNode","ProductNode","isKgProductCard","productButtonEnabled","productRatingEnabled","productTitle","productDescription","productImageSrc","productImageWidth","productImageHeight","stars","productStarRating","getButtonText","productButton","productUrl","renderProductNode","starIcon","starActiveClasses","star1","star2","star3","star4","star5","isButtonFilled","__productButtonEnabled","__productUrl","__productButton","__productTitle","__productDescription","__productImageSrc","__productRatingEnabled","$createProductNode","$isProductNode","parseEmbedNode","EmbedNode","iframe","_createPayloadForIframe","tweetData","tweet_data","isEmail","tweetId","id","numberFormatter","Intl","NumberFormat","notation","unitDisplay","maximumFractionDigits","retweetCount","public_metrics","retweet_count","likeCount","like_count","authorUser","users","user","author_id","tweetTime","DateTime","fromISO","created_at","toLocaleString","TIME_SIMPLE","tweetDate","DATE_MED","mentions","entities","urls","hashtags","concat","start","tweetContent","tweetImageUrl","hasImageOrVideo","attachments","media_keys","media","preview_image_url","hasPoll","poll_ids","last","parts","toArray","entity","slice","end","display_url","username","tag","partContent","part","profile_image_url","renderEmbedNode","embedType","twitterRenderer","renderTemplate","isVideoWithThumbnail","thumbnail_url","thumbnailAspectRatio","thumbnail_width","thumbnail_height","spacerWidth","spacerHeight","$createEmbedNode","$isEmbedNode","removeSpaces","wrapReplacementStrings","removeCodeWrappersFromHelpers","tempDiv","codeElements","codeTextContent","codeContent","replaceChild","createRange","createContextualFragment","renderEmailNode","EmailNode","$createEmailNode","$isEmailNode","readGalleryImageAttributesFromElement","imgNum","parseGalleryNode","GalleryNode","imgs","images","isGrafGallery","paragraphCount","nextElementSibling","currentNodeCaption","isSqsGallery","previousElementSibling","getElementsByTagName","prevNode","MAX_IMG_PER_ROW","isValidImage","buildStructure","rows","noOfImages","idx","renderGalleryNode","validImages","rowDiv","imgDiv","newImageDimensions","$createGalleryNode","$isGalleryNode","renderEmailCtaNode","showButton","segment","showDividers","hasButton","buttonTemplate","cleanedButton","EmailCtaNode","$createEmailCtaNode","$isEmailCtaNode","rgbToHex","rgb","r","g","red","green","blue","hex","getLayout","signupParser","SignupNode","isSignupNode","lexicalSignupForm","disclaimer","successMessage","labels","input","isAccentBackground","isAccentButton","isSwapped","formTemplate","label","loadingIcon","renderSignupCardToDOM","__disclaimer","__labels","__successMessage","h3Element","setLabels","isArray","every","item","addLabel","removeLabel","l","$createSignupNode","$isSignupNode","renderCollectionNode","renderData","getKey","posts","collection","postCount","columns","headerClass","collectionClass","post","postTemplate","published_at","publishDate","excerpt","feature_image","reading_time","readTime","imageWrapperClass","imageClass","titleClass","excerptClass","metaClass","postWrapperClass","toFormat","getColumns","collectionParser","CollectionNode","isCollectionNode","getDynamicData","__collection","__postCount","getCollectionPosts","$createCollectionNode","$isCollectionNode","extendedTextNodeReplacement","TextNode","with","ExtendedTextNode","__text","importers","span","patchConversion","convertSpanElement","json","isSimpleText","__type","__mode","originalDOMConverter","convertFn","original","originalOutput","forChild","lexicalNode","originalForChild","x","result","$isTextNode","hasBoldFontWeight","fontWeight","parentElement","hasItalicFontStyle","fontStyle","hasUnderlineTextDecoration","textDecoration","hasStrikethroughClass","hasHighlightClass","toggleFormat","extendedHeadingNodeReplacement","HeadingNode","ExtendedHeadingNode","__tag","p","patchParagraphConversion","hasAriaHeadingRole","hasAriaLevel","level","DEFAULT_NODES","textnode","headingnode","codeblock","video","audio","callout","aside","horizontalrule","file","toggle","bookmark","paywall","product","embed","email","gallery","emailCta","signup"],"mappings":"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"}